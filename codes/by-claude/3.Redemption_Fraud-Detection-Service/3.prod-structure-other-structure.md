# ğŸš€ Sub-Project 3: Redemption & Transaction Service - Complete Implementation Guide

## ğŸ“‹ **Báº¢NG Tá»”NG Há»¢P Táº¤T Cáº¢ FILES VÃ€ REFERENCES**

| **Category** | **File Path** | **MÃ´ táº£** | **SRS Reference** | **Business Purpose** |
|-------------|---------------|-----------|-------------------|-------------------|
| **ğŸ“¦ SHARED PACKAGES** | | | | |
| Core Package | `@psp/shared-core@1.2.0` | Common utilities package | Part02.8 Technical Requirements | Cross-service utilities (logger, validation, crypto) |
| Events Package | `@psp/shared-events@1.1.0` | Domain events contracts | Part06.1.2 Event Bus | Event-driven communication between services |
| Database Package | `@psp/shared-database@1.0.5` | Database utilities | Part07.1 Data Model Overview | DB connection management, migrations |
| **ğŸ—ƒï¸ BACKEND DOMAIN** | | | | |
| Entities | `backend/src/domain/entities/Redemption.ts` | Core redemption entity vá»›i business rules | Part04.3.1 Barcode Redemption (FR-007) | Encapsulate redemption logic, state management |
| Entities | `backend/src/domain/entities/Transaction.ts` | Transaction entity with payment processing | Part04.3.1 Barcode Redemption | Transaction lifecycle management |
| Entities | `backend/src/domain/entities/FraudScore.ts` | Fraud detection entity with ML scoring | Part04.3.5 Fraud Detection (FR-011) | ML-based fraud prevention |
| Entities | `backend/src/domain/entities/DeviceFingerprint.ts` | Device fingerprinting entity | Part04.3.5 Fraud Detection | Device identification and tracking |
| Entities | `backend/src/domain/entities/RedemptionAudit.ts` | Audit log entity for compliance | Part05.6 Audit & Compliance | Transaction audit trail |
| Entities | `backend/src/domain/entities/BarcodeValidation.ts` | Barcode validation entity | Part04.3.1 Barcode Redemption | QR/barcode verification logic |
| Entities | `backend/src/domain/entities/OfflineRedemption.ts` | Offline redemption entity | Part04.3.1 Barcode Redemption | Offline sync management |
| Entities | `backend/src/domain/entities/POSIntegration.ts` | POS system integration entity | Part09.2 POS Integration | Point-of-sale system connectivity |
| Value Objects | `backend/src/domain/value-objects/BarcodeValue.ts` | Barcode value object with validation | Part04.3.1 Barcode Redemption | QR/barcode format validation |
| Value Objects | `backend/src/domain/value-objects/TransactionAmount.ts` | Transaction amount value object | Part04.3.1 Barcode Redemption | Amount validation and currency handling |
| Value Objects | `backend/src/domain/value-objects/FraudRiskLevel.ts` | Fraud risk assessment value object | Part04.3.5 Fraud Detection | Risk categorization (Low/Medium/High) |
| Value Objects | `backend/src/domain/value-objects/RedemptionStatus.ts` | Redemption status management | Part04.3.1 Barcode Redemption | Status transitions (Pending/Success/Failed) |
| Value Objects | `backend/src/domain/value-objects/DeviceIdentifier.ts` | Device identification value object | Part04.3.5 Fraud Detection | Unique device tracking |
| Repositories | `backend/src/domain/repositories/IRedemptionRepository.ts` | Redemption repository interface | Part06.2.1 Layered Architecture | Redemption data access contract |
| Repositories | `backend/src/domain/repositories/ITransactionRepository.ts` | Transaction repository interface | Part06.2.1 Layered Architecture | Transaction storage contract |
| Repositories | `backend/src/domain/repositories/IFraudScoreRepository.ts` | Fraud score repository interface | Part06.2.1 Layered Architecture | Fraud data access contract |
| Repositories | `backend/src/domain/repositories/IDeviceFingerprintRepository.ts` | Device fingerprint repository interface | Part06.2.1 Layered Architecture | Device tracking contract |
| Repositories | `backend/src/domain/repositories/IRedemptionAuditRepository.ts` | Audit repository interface | Part06.2.1 Layered Architecture | Audit log storage contract |
| Repositories | `backend/src/domain/repositories/IBarcodeValidationRepository.ts` | Barcode validation repository interface | Part06.2.1 Layered Architecture | Barcode verification contract |
| Repositories | `backend/src/domain/repositories/IOfflineRedemptionRepository.ts` | Offline redemption repository interface | Part06.2.1 Layered Architecture | Offline sync storage contract |
| Domain Services | `backend/src/domain/services/RedemptionDomainService.ts` | Redemption business logic service | Part04.3.1 Barcode Redemption | Complex redemption workflows |
| Domain Services | `backend/src/domain/services/FraudDetectionDomainService.ts` | Fraud detection business logic | Part04.3.5 Fraud Detection | ML fraud scoring algorithms |
| Domain Services | `backend/src/domain/services/BarcodeValidationDomainService.ts` | Barcode validation service | Part04.3.1 Barcode Redemption | QR/barcode verification logic |
| Domain Services | `backend/src/domain/services/DeviceFingerprintDomainService.ts` | Device fingerprinting service | Part04.3.5 Fraud Detection | Device identification algorithms |
| Domain Services | `backend/src/domain/services/TransactionDomainService.ts` | Transaction processing service | Part04.3.1 Barcode Redemption | Payment processing logic |
| **ğŸ“„ BACKEND APPLICATION** | | | | |
| Use Cases | `backend/src/application/use-cases/redemption/ProcessRedemptionUseCase.ts` | Main redemption processing workflow | Part04.3.1 Barcode Redemption (FR-007) | End-to-end redemption flow |
| Use Cases | `backend/src/application/use-cases/redemption/ValidateBarcodeUseCase.ts` | Barcode validation workflow | Part04.3.1 Barcode Redemption | QR/barcode verification process |
| Use Cases | `backend/src/application/use-cases/redemption/ProcessOfflineRedemptionUseCase.ts` | Offline redemption processing | Part04.3.1 Barcode Redemption | Offline sync and validation |
| Use Cases | `backend/src/application/use-cases/redemption/GetRedemptionStatusUseCase.ts` | Redemption status tracking | Part04.3.1 Barcode Redemption | Status monitoring and updates |
| Use Cases | `backend/src/application/use-cases/redemption/CancelRedemptionUseCase.ts` | Redemption cancellation logic | Part04.3.1 Barcode Redemption | Transaction reversal workflow |
| Use Cases | `backend/src/application/use-cases/transaction/CreateTransactionUseCase.ts` | Transaction creation workflow | Part04.3.1 Barcode Redemption | Payment transaction processing |
| Use Cases | `backend/src/application/use-cases/transaction/ProcessPaymentUseCase.ts` | Payment processing workflow | Part04.3.1 Barcode Redemption | Payment gateway integration |
| Use Cases | `backend/src/application/use-cases/transaction/RefundTransactionUseCase.ts` | Transaction refund logic | Part04.3.1 Barcode Redemption | Refund processing workflow |
| Use Cases | `backend/src/application/use-cases/transaction/GetTransactionHistoryUseCase.ts` | Transaction history retrieval | Part04.3.1 Barcode Redemption | Transaction audit and reporting |
| Use Cases | `backend/src/application/use-cases/fraud/CalculateFraudScoreUseCase.ts` | Fraud score calculation | Part04.3.5 Fraud Detection (FR-011) | ML-based fraud assessment |
| Use Cases | `backend/src/application/use-cases/fraud/ProcessFraudAlertUseCase.ts` | Fraud alert processing | Part04.3.5 Fraud Detection | Fraud incident management |
| Use Cases | `backend/src/application/use-cases/fraud/CreateDeviceFingerprintUseCase.ts` | Device fingerprint creation | Part04.3.5 Fraud Detection | Device identification process |
| Use Cases | `backend/src/application/use-cases/fraud/CheckDeviceRiskUseCase.ts` | Device risk assessment | Part04.3.5 Fraud Detection | Device-based risk evaluation |
| Use Cases | `backend/src/application/use-cases/fraud/UpdateFraudRulesUseCase.ts` | Fraud rules management | Part04.3.5 Fraud Detection | Dynamic fraud rule updates |
| Use Cases | `backend/src/application/use-cases/audit/CreateAuditLogUseCase.ts` | Audit log creation | Part05.6 Audit & Compliance | Compliance audit trail |
| Use Cases | `backend/src/application/use-cases/audit/GetAuditTrailUseCase.ts` | Audit trail retrieval | Part05.6 Audit & Compliance | Audit reporting and investigation |
| Use Cases | `backend/src/application/use-cases/pos/SyncPOSDataUseCase.ts` | POS data synchronization | Part09.2 POS Integration | Point-of-sale data sync |
| Use Cases | `backend/src/application/use-cases/pos/ProcessOfflinePOSUseCase.ts` | Offline POS processing | Part09.2 POS Integration | Offline POS transaction handling |
| DTOs | `backend/src/application/dto/RedemptionDTO.ts` | Redemption data transfer objects | Part08.3.1 Redemption APIs | API contract definitions |
| DTOs | `backend/src/application/dto/TransactionDTO.ts` | Transaction data transfer objects | Part08.3.1 Redemption APIs | Transaction API contracts |
| DTOs | `backend/src/application/dto/FraudDTO.ts` | Fraud detection data transfer objects | Part08.3.2 Fraud Detection APIs | Fraud API contracts |
| DTOs | `backend/src/application/dto/BarcodeDTO.ts` | Barcode data transfer objects | Part08.3.1 Redemption APIs | Barcode API contracts |
| DTOs | `backend/src/application/dto/AuditDTO.ts` | Audit data transfer objects | Part08.3.1 Redemption APIs | Audit API contracts |
| DTOs | `backend/src/application/dto/POSDTO.ts` | POS data transfer objects | Part08.3.1 Redemption APIs | POS integration contracts |
| Command Handlers | `backend/src/application/handlers/ProcessRedemptionHandler.ts` | CQRS redemption command handler | Part06.2.3 CQRS Pattern | Command processing for redemptions |
| Command Handlers | `backend/src/application/handlers/ProcessTransactionHandler.ts` | CQRS transaction command handler | Part06.2.3 CQRS Pattern | Command processing for transactions |
| Command Handlers | `backend/src/application/handlers/FraudDetectionHandler.ts` | CQRS fraud detection command handler | Part06.2.3 CQRS Pattern | Command processing for fraud detection |
| Query Handlers | `backend/src/application/handlers/GetRedemptionQueryHandler.ts` | CQRS redemption query handler | Part06.2.3 CQRS Pattern | Query processing for redemptions |
| Query Handlers | `backend/src/application/handlers/GetTransactionQueryHandler.ts` | CQRS transaction query handler | Part06.2.3 CQRS Pattern | Query processing for transactions |
| Query Handlers | `backend/src/application/handlers/GetFraudScoreQueryHandler.ts` | CQRS fraud score query handler | Part06.2.3 CQRS Pattern | Query processing for fraud scores |
| **ğŸ—ï¸ BACKEND INFRASTRUCTURE** | | | | |
| Repositories | `backend/src/infrastructure/persistence/repositories/RedemptionRepository.ts` | PostgreSQL redemption repository | Part07.4.1 Redemption Table | Redemption data persistence |
| Repositories | `backend/src/infrastructure/persistence/repositories/TransactionRepository.ts` | PostgreSQL transaction repository | Part07.4.1 Redemption Table | Transaction data persistence |
| Repositories | `backend/src/infrastructure/persistence/repositories/FraudScoreRepository.ts` | PostgreSQL fraud score repository | Part07.4.2 Fraud_Score Table | Fraud data persistence |
| Repositories | `backend/src/infrastructure/persistence/repositories/DeviceFingerprintRepository.ts` | PostgreSQL device fingerprint repository | Part07.4.3 Device_Fingerprint Table | Device tracking persistence |
| Repositories | `backend/src/infrastructure/persistence/repositories/RedemptionAuditRepository.ts` | PostgreSQL audit repository | Part07.4.4 Audit_Log Table | Audit trail persistence |
| Repositories | `backend/src/infrastructure/persistence/repositories/BarcodeValidationRepository.ts` | PostgreSQL barcode validation repository | Part07.4.1 Redemption Table | Barcode verification persistence |
| Repositories | `backend/src/infrastructure/persistence/repositories/OfflineRedemptionRepository.ts` | PostgreSQL offline redemption repository | Part07.4.5 Offline_Redemption Table | Offline sync persistence |
| Models | `backend/src/infrastructure/persistence/models/RedemptionModel.ts` | Prisma redemption model | Part07.4.1 Redemption Table | Database schema mapping |
| Models | `backend/src/infrastructure/persistence/models/TransactionModel.ts` | Prisma transaction model | Part07.4.1 Redemption Table | Transaction schema mapping |
| Models | `backend/src/infrastructure/persistence/models/FraudScoreModel.ts` | Prisma fraud score model | Part07.4.2 Fraud_Score Table | Fraud schema mapping |
| Models | `backend/src/infrastructure/persistence/models/DeviceFingerprintModel.ts` | Prisma device fingerprint model | Part07.4.3 Device_Fingerprint Table | Device tracking schema |
| Models | `backend/src/infrastructure/persistence/models/RedemptionAuditModel.ts` | Prisma audit model | Part07.4.4 Audit_Log Table | Audit schema mapping |
| Models | `backend/src/infrastructure/persistence/models/BarcodeValidationModel.ts` | Prisma barcode validation model | Part07.4.1 Redemption Table | Barcode verification schema |
| Models | `backend/src/infrastructure/persistence/models/OfflineRedemptionModel.ts` | Prisma offline redemption model | Part07.4.5 Offline_Redemption Table | Offline sync schema |
| Migrations | `backend/src/infrastructure/persistence/migrations/001_create_redemptions.sql` | Redemption table creation | Part07.4.1 Redemption Table | Database schema setup |
| Migrations | `backend/src/infrastructure/persistence/migrations/002_create_fraud_scores.sql` | Fraud score table creation | Part07.4.2 Fraud_Score Table | Fraud detection schema |
| Migrations | `backend/src/infrastructure/persistence/migrations/003_create_device_fingerprints.sql` | Device fingerprint table creation | Part07.4.3 Device_Fingerprint Table | Device tracking schema |
| Migrations | `backend/src/infrastructure/persistence/migrations/004_create_audit_logs.sql` | Audit log table creation | Part07.4.4 Audit_Log Table | Audit trail schema |
| Migrations | `backend/src/infrastructure/persistence/migrations/005_create_offline_redemptions.sql` | Offline redemption table creation | Part07.4.5 Offline_Redemption Table | Offline sync schema |
| External Services | `backend/src/infrastructure/external-services/ScanditSDKService.ts` | Scandit SDK integration | Part09.2.1 Scandit SDK Integration | QR/barcode scanning capability |
| External Services | `backend/src/infrastructure/external-services/PaymentGatewayService.ts` | Payment gateway integration | Part09.3 Payment Integration | Payment processing service |
| External Services | `backend/src/infrastructure/external-services/FraudMLService.ts` | Machine learning fraud detection | Part04.3.5 Fraud Detection | ML model integration |
| External Services | `backend/src/infrastructure/external-services/POSSystemService.ts` | POS system integration | Part09.2 POS Integration | Point-of-sale connectivity |
| External Services | `backend/src/infrastructure/external-services/AuditLogService.ts` | External audit log service | Part05.6 Audit & Compliance | Compliance logging service |
| External Services | `backend/src/infrastructure/external-services/DeviceFingerprintService.ts` | Device fingerprinting service | Part04.3.5 Fraud Detection | Device identification service |
| External Services | `backend/src/infrastructure/external-services/GeoLocationService.ts` | Geolocation verification service | Part04.3.5 Fraud Detection | Location-based fraud detection |
| Config | `backend/src/infrastructure/config/redemption.config.ts` | Redemption service configuration | Part02.8 Technical Requirements | Service configuration management |
| Config | `backend/src/infrastructure/config/fraud.config.ts` | Fraud detection configuration | Part04.3.5 Fraud Detection | Fraud detection parameters |
| Config | `backend/src/infrastructure/config/payment.config.ts` | Payment gateway configuration | Part09.3 Payment Integration | Payment service configuration |
| Config | `backend/src/infrastructure/config/pos.config.ts` | POS integration configuration | Part09.2 POS Integration | POS system parameters |
| Config | `backend/src/infrastructure/config/audit.config.ts` | Audit configuration | Part05.6 Audit & Compliance | Audit service configuration |
| Config | `backend/src/infrastructure/config/ml.config.ts` | Machine learning configuration | Part04.3.5 Fraud Detection | ML model parameters |
| **ğŸŒ BACKEND PRESENTATION** | | | | |
| Controllers | `backend/src/presentation/controllers/RedemptionController.ts` | Redemption REST API controller | Part08.3.1 Redemption APIs | Redemption endpoint implementation |
| Controllers | `backend/src/presentation/controllers/TransactionController.ts` | Transaction REST API controller | Part08.3.1 Redemption APIs | Transaction endpoint implementation |
| Controllers | `backend/src/presentation/controllers/FraudController.ts` | Fraud detection REST API controller | Part08.3.2 Fraud Detection APIs | Fraud endpoint implementation |
| Controllers | `backend/src/presentation/controllers/BarcodeController.ts` | Barcode validation REST API controller | Part08.3.1 Redemption APIs | Barcode endpoint implementation |
| Controllers | `backend/src/presentation/controllers/AuditController.ts` | Audit REST API controller | Part08.3.1 Redemption APIs | Audit endpoint implementation |
| Controllers | `backend/src/presentation/controllers/POSController.ts` | POS integration REST API controller | Part08.3.1 Redemption APIs | POS endpoint implementation |
| Controllers | `backend/src/presentation/controllers/HealthController.ts` | Service health check controller | Part14.3 Monitoring Stack | Health monitoring endpoints |
| Middleware | `backend/src/presentation/middleware/AuthenticationMiddleware.ts` | JWT authentication middleware | Part05.3 Security Requirements | API security enforcement |
| Middleware | `backend/src/presentation/middleware/AuthorizationMiddleware.ts` | RBAC authorization middleware | Access_Control_Tree_Grok.md | Role-based access control |
| Middleware | `backend/src/presentation/middleware/ValidationMiddleware.ts` | Request validation middleware | Part05.7 Input Validation | Data validation enforcement |
| Middleware | `backend/src/presentation/middleware/RateLimitMiddleware.ts` | API rate limiting middleware | Part05.4 Rate Limiting | API protection |
| Middleware | `backend/src/presentation/middleware/LoggingMiddleware.ts` | Request logging middleware | Part14.3 Monitoring Stack | Request tracking |
| Middleware | `backend/src/presentation/middleware/FraudDetectionMiddleware.ts` | Real-time fraud detection middleware | Part04.3.5 Fraud Detection | Request-level fraud screening |
| Middleware | `backend/src/presentation/middleware/ErrorHandlingMiddleware.ts` | Centralized error handling | Part05.8 Error Handling | Error response standardization |
| **ğŸ¤ SERVICE-SPECIFIC SHARED CODE** | | | | |
| Constants | `backend/src/shared/constants/redemption.constants.ts` | Redemption-specific constants | Part04.3.1 Barcode Redemption | Business rule constants |
| Constants | `backend/src/shared/constants/fraud.constants.ts` | Fraud detection constants | Part04.3.5 Fraud Detection | Fraud threshold constants |
| Constants | `backend/src/shared/constants/transaction.constants.ts` | Transaction constants | Part04.3.1 Barcode Redemption | Transaction type constants |
| Constants | `backend/src/shared/constants/api.constants.ts` | API-specific constants | Part08.3.1 Redemption APIs | API endpoint constants |
| Utils | `backend/src/shared/utils/barcode.utils.ts` | Barcode utility functions | Part04.3.1 Barcode Redemption | QR/barcode processing utilities |
| Utils | `backend/src/shared/utils/fraud.utils.ts` | Fraud detection utilities | Part04.3.5 Fraud Detection | Fraud calculation utilities |
| Utils | `backend/src/shared/utils/transaction.utils.ts` | Transaction utility functions | Part04.3.1 Barcode Redemption | Payment processing utilities |
| Utils | `backend/src/shared/utils/validation.utils.ts` | Validation utility functions | Part05.7 Input Validation | Data validation utilities |
| Utils | `backend/src/shared/utils/encryption.utils.ts` | Encryption utility functions | Part05.3 Security Requirements | Data encryption utilities |
| Utils | `backend/src/shared/utils/audit.utils.ts` | Audit utility functions | Part05.6 Audit & Compliance | Audit trail utilities |
| Utils | `backend/src/shared/utils/device.utils.ts` | Device utility functions | Part04.3.5 Fraud Detection | Device fingerprinting utilities |
| Exceptions | `backend/src/shared/exceptions/RedemptionException.ts` | Redemption-specific exceptions | Part05.8 Error Handling | Business logic errors |
| Exceptions | `backend/src/shared/exceptions/FraudException.ts` | Fraud detection exceptions | Part05.8 Error Handling | Fraud-related errors |
| Exceptions | `backend/src/shared/exceptions/TransactionException.ts` | Transaction exceptions | Part05.8 Error Handling | Payment processing errors |
| Exceptions | `backend/src/shared/exceptions/ValidationException.ts` | Validation exceptions | Part05.8 Error Handling | Data validation errors |
| Exceptions | `backend/src/shared/exceptions/POSException.ts` | POS integration exceptions | Part05.8 Error Handling | POS system errors |
| **ğŸ§ª BACKEND TESTING** | | | | |
| Unit Tests | `backend/tests/unit/domain/entities/Redemption.test.ts` | Redemption entity unit tests | Part15.1 Testing Strategy | Domain logic testing |
| Unit Tests | `backend/tests/unit/domain/entities/FraudScore.test.ts` | Fraud score entity unit tests | Part15.1 Testing Strategy | Fraud logic testing |
| Unit Tests | `backend/tests/unit/domain/entities/Transaction.test.ts` | Transaction entity unit tests | Part15.1 Testing Strategy | Transaction logic testing |
| Unit Tests | `backend/tests/unit/domain/entities/DeviceFingerprint.test.ts` | Device fingerprint entity unit tests | Part15.1 Testing Strategy | Device tracking logic testing |
| Unit Tests | `backend/tests/unit/domain/services/RedemptionDomainService.test.ts` | Redemption domain service tests | Part15.1 Testing Strategy | Business logic testing |
| Unit Tests | `backend/tests/unit/domain/services/FraudDetectionDomainService.test.ts` | Fraud detection domain service tests | Part15.1 Testing Strategy | Fraud algorithm testing |
| Unit Tests | `backend/tests/unit/application/use-cases/ProcessRedemptionUseCase.test.ts` | Process redemption use case tests | Part15.1 Testing Strategy | Use case logic testing |
| Unit Tests | `backend/tests/unit/application/use-cases/CalculateFraudScoreUseCase.test.ts` | Fraud score calculation tests | Part15.1 Testing Strategy | ML scoring testing |
| Unit Tests | `backend/tests/unit/infrastructure/external-services/ScanditSDKService.test.ts` | Scandit SDK service tests | Part15.1 Testing Strategy | External service testing |
| Unit Tests | `backend/tests/unit/infrastructure/external-services/PaymentGatewayService.test.ts` | Payment gateway service tests | Part15.1 Testing Strategy | Payment service testing |
| Integration Tests | `backend/tests/integration/redemption/redemption-flow.test.ts` | End-to-end redemption flow tests | Part15.1 Testing Strategy | Full redemption workflow testing |
| Integration Tests | `backend/tests/integration/fraud/fraud-detection.test.ts` | Fraud detection integration tests | Part15.1 Testing Strategy | ML fraud detection testing |
| Integration Tests | `backend/tests/integration/transaction/payment-processing.test.ts` | Payment processing integration tests | Part15.1 Testing Strategy | Payment workflow testing |
| Integration Tests | `backend/tests/integration/pos/pos-sync.test.ts` | POS synchronization tests | Part15.1 Testing Strategy | POS integration testing |
| Integration Tests | `backend/tests/integration/audit/audit-trail.test.ts` | Audit trail integration tests | Part15.1 Testing Strategy | Compliance audit testing |
| Integration Tests | `backend/tests/integration/database/redemption-repository.test.ts` | Redemption repository tests | Part15.1 Testing Strategy | Database layer testing |
| Integration Tests | `backend/tests/integration/database/fraud-repository.test.ts` | Fraud repository tests | Part15.1 Testing Strategy | Fraud data access testing |
| E2E Tests | `backend/tests/e2e/redemption/complete-redemption-flow.test.ts` | Complete redemption flow E2E tests | Part15.1 Testing Strategy | End-to-end system testing |
| E2E Tests | `backend/tests/e2e/fraud/fraud-prevention-flow.test.ts` | Fraud prevention flow E2E tests | Part15.1 Testing Strategy | Fraud detection system testing |
| E2E Tests | `backend/tests/e2e/pos/offline-pos-sync.test.ts` | Offline POS sync E2E tests | Part15.1 Testing Strategy | Offline capability testing |
| E2E Tests | `backend/tests/e2e/api/redemption-api.test.ts` | Redemption API E2E tests | Part15.1 Testing Strategy | API integration testing |
| E2E Tests | `backend/tests/e2e/api/fraud-api.test.ts` | Fraud API E2E tests | Part15.1 Testing Strategy | Fraud API testing |
| **ğŸ³ CONTAINERIZATION & DEPLOYMENT** | | | | |
| Docker | `backend/Dockerfile` | Redemption service containerization | Part14.1 Containerization | Service deployment container |
| Docker | `backend/.dockerignore` | Docker ignore file | Part14.1 Containerization | Build optimization |
| Docker | `backend/docker-compose.yml` | Local development environment | Part14.1 Containerization | Local testing setup |
| Kubernetes | `k8s/redemption-deployment.yaml` | Kubernetes deployment manifest | Part14.2 Kubernetes Deployment | Production deployment |
| Kubernetes | `k8s/redemption-service.yaml` | Kubernetes service manifest | Part14.2 Kubernetes Deployment | Service discovery |
| Kubernetes | `k8s/redemption-ingress.yaml` | Kubernetes ingress manifest | Part14.2 Kubernetes Deployment | Traffic routing |
| Kubernetes | `k8s/redemption-configmap.yaml` | Kubernetes config map | Part14.2 Kubernetes Deployment | Configuration management |
| Kubernetes | `k8s/redemption-secrets.yaml` | Kubernetes secrets manifest | Part14.2 Kubernetes Deployment | Sensitive data management |
| **ğŸ“Š MONITORING & OBSERVABILITY** | | | | |
| Monitoring | `monitoring/prometheus/redemption-metrics.yaml` | Prometheus metrics configuration | Part14.3 Monitoring Stack | Service metrics collection |
| Monitoring | `monitoring/grafana/dashboards/redemption-dashboard.json` | Grafana dashboard for redemption service | Part14.3 Monitoring Stack | Metrics visualization |
| Monitoring | `monitoring/grafana/dashboards/fraud-detection-dashboard.json` | Grafana dashboard for fraud detection | Part14.3 Monitoring Stack | Fraud metrics visualization |
| Monitoring | `monitoring/alerts/redemption-alerts.yaml` | Alert rules for redemption service | Part14.3 Monitoring Stack | Service health alerts |
| Monitoring | `monitoring/alerts/fraud-alerts.yaml` | Alert rules for fraud detection | Part14.3 Monitoring Stack | Fraud detection alerts |
| **ğŸš€ CI/CD & AUTOMATION** | | | | |
| CI/CD | `.github/workflows/redemption-ci.yml` | Continuous integration pipeline | Part15.2 CI/CD Pipelines | Automated testing and building |
| CI/CD | `.github/workflows/redemption-cd.yml` | Continuous deployment pipeline | Part15.2 CI/CD Pipelines | Automated deployment |
| Scripts | `scripts/setup-redemption-service.sh` | Service setup automation | Part15.2 CI/CD Pipelines | Local environment setup |
| Scripts | `scripts/deploy-redemption-service.sh` | Deployment automation | Part15.2 CI/CD Pipelines | Production deployment |
| Scripts | `scripts/migrate-database.sh` | Database migration automation | Part15.2 CI/CD Pipelines | Schema updates |
| Scripts | `scripts/backup-redemption-data.sh` | Data backup automation | Part15.2 CI/CD Pipelines | Data protection |
| Scripts | `scripts/fraud-model-update.sh` | ML model update automation | Part04.3.5 Fraud Detection | Model deployment |
| **ğŸ“š DOCUMENTATION** | | | | |
| API Docs | `docs/api/redemption-api.md` | Redemption API documentation | Part08.3.1 Redemption APIs | API specification |
| API Docs | `docs/api/fraud-detection-api.md` | Fraud detection API documentation | Part08.3.2 Fraud Detection APIs | Fraud API specification |
| API Docs | `docs/api/transaction-api.md` | Transaction API documentation | Part08.3.1 Redemption APIs | Transaction API specification |
| API Docs | `docs/api/barcode-validation-api.md` | Barcode validation API documentation | Part08.3.1 Redemption APIs | Barcode API specification |
| API Docs | `docs/api/pos-integration-api.md` | POS integration API documentation | Part08.3.1 Redemption APIs | POS API specification |
| Architecture | `docs/architecture/redemption-architecture.md` | Redemption service architecture guide | Part06.2.1 Layered Architecture | Architecture documentation |
| Architecture | `docs/architecture/fraud-detection-architecture.md` | Fraud detection architecture guide | Part04.3.5 Fraud Detection | Fraud system documentation |
| Security | `docs/security/redemption-security.md` | Security implementation guide | Part05.3 Security Requirements | Security documentation |
| Operations | `docs/operations/redemption-runbook.md` | Operational procedures guide | Part14.3 Monitoring Stack | Operations documentation |
| Operations | `docs/operations/fraud-model-management.md` | ML model management guide | Part04.3.5 Fraud Detection | Model operations documentation |

---

## ğŸ“ **Cáº¤U TRÃšC THÆ¯ Má»¤C HOÃ€N CHá»ˆNH**

```bash
redemption-transaction-service/
â”œâ”€â”€ ğŸ“‚ backend/                                 # Redemption & Transaction Service
â”‚   â”œâ”€â”€ ğŸ“‚ src/
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ domain/                          # Domain Layer
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ entities/                    # Business Entities
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Redemption.ts                # Core redemption entity
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Transaction.ts               # Transaction entity
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FraudScore.ts                # Fraud detection entity
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DeviceFingerprint.ts         # Device fingerprinting
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RedemptionAudit.ts           # Audit log entity
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ BarcodeValidation.ts         # Barcode validation entity
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OfflineRedemption.ts         # Offline redemption entity
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ POSIntegration.ts            # POS integration entity
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ value-objects/               # Value Objects
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ BarcodeValue.ts              # Barcode value object
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ TransactionAmount.ts         # Transaction amount
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FraudRiskLevel.ts            # Fraud risk assessment
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RedemptionStatus.ts          # Redemption status
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ DeviceIdentifier.ts          # Device identification
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ repositories/                # Repository Interfaces
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ IRedemptionRepository.ts     # Redemption repository interface
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ITransactionRepository.ts    # Transaction repository interface
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ IFraudScoreRepository.ts     # Fraud score repository interface
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ IDeviceFingerprintRepository.ts # Device repository interface
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ IRedemptionAuditRepository.ts # Audit repository interface
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ IBarcodeValidationRepository.ts # Barcode repository interface
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ IOfflineRedemptionRepository.ts # Offline repository interface
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“‚ services/                    # Domain Services
â”‚   â”‚   â”‚       â”œâ”€â”€ RedemptionDomainService.ts   # Redemption business logic
â”‚   â”‚   â”‚       â”œâ”€â”€ FraudDetectionDomainService.ts # Fraud detection logic
â”‚   â”‚   â”‚       â”œâ”€â”€ BarcodeValidationDomainService.ts # Barcode validation
â”‚   â”‚   â”‚       â”œâ”€â”€ DeviceFingerprintDomainService.ts # Device fingerprinting
â”‚   â”‚   â”‚       â””â”€â”€ TransactionDomainService.ts  # Transaction processing
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ application/                     # Application Layer
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ use-cases/                   # Use Cases
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ redemption/              # Redemption Use Cases
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProcessRedemptionUseCase.ts # Main redemption workflow
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ValidateBarcodeUseCase.ts # Barcode validation
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProcessOfflineRedemptionUseCase.ts # Offline processing
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ GetRedemptionStatusUseCase.ts # Status tracking
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ CancelRedemptionUseCase.ts # Cancellation logic
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ transaction/             # Transaction Use Cases
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CreateTransactionUseCase.ts # Transaction creation
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProcessPaymentUseCase.ts # Payment processing
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RefundTransactionUseCase.ts # Refund logic
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ GetTransactionHistoryUseCase.ts # History retrieval
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ fraud/                   # Fraud Detection Use Cases
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CalculateFraudScoreUseCase.ts # Fraud scoring
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProcessFraudAlertUseCase.ts # Alert processing
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CreateDeviceFingerprintUseCase.ts # Device fingerprinting
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CheckDeviceRiskUseCase.ts # Risk assessment
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ UpdateFraudRulesUseCase.ts # Rules management
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ audit/                   # Audit Use Cases
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CreateAuditLogUseCase.ts # Audit log creation
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ GetAuditTrailUseCase.ts  # Audit trail retrieval
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“‚ pos/                     # POS Integration Use Cases
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ SyncPOSDataUseCase.ts    # POS data sync
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ ProcessOfflinePOSUseCase.ts # Offline POS processing
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ dto/                         # Data Transfer Objects
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RedemptionDTO.ts             # Redemption DTOs
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ TransactionDTO.ts            # Transaction DTOs
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FraudDTO.ts                  # Fraud DTOs
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ BarcodeDTO.ts                # Barcode DTOs
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AuditDTO.ts                  # Audit DTOs
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ POSDTO.ts                    # POS DTOs
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“‚ handlers/                    # CQRS Handlers
â”‚   â”‚   â”‚       â”œâ”€â”€ ProcessRedemptionHandler.ts  # Redemption command handler
â”‚   â”‚   â”‚       â”œâ”€â”€ ProcessTransactionHandler.ts # Transaction command handler
â”‚   â”‚   â”‚       â”œâ”€â”€ FraudDetectionHandler.ts     # Fraud command handler
â”‚   â”‚   â”‚       â”œâ”€â”€ GetRedemptionQueryHandler.ts # Redemption query handler
â”‚   â”‚   â”‚       â”œâ”€â”€ GetTransactionQueryHandler.ts # Transaction query handler
â”‚   â”‚   â”‚       â””â”€â”€ GetFraudScoreQueryHandler.ts # Fraud query handler
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ infrastructure/                  # Infrastructure Layer
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ persistence/                 # Data Persistence
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ repositories/            # Repository Implementations
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RedemptionRepository.ts  # Redemption data access
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ TransactionRepository.ts # Transaction data access
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FraudScoreRepository.ts  # Fraud data access
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DeviceFingerprintRepository.ts # Device data access
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RedemptionAuditRepository.ts # Audit data access
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ BarcodeValidationRepository.ts # Barcode data access
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ OfflineRedemptionRepository.ts # Offline data access
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ models/                  # Database Models
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RedemptionModel.ts       # Redemption model
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ TransactionModel.ts      # Transaction model
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FraudScoreModel.ts       # Fraud score model
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DeviceFingerprintModel.ts # Device model
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RedemptionAuditModel.ts  # Audit model
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ BarcodeValidationModel.ts # Barcode model
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ OfflineRedemptionModel.ts # Offline model
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“‚ migrations/              # Database Migrations
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ 001_create_redemptions.sql # Redemption schema
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ 002_create_fraud_scores.sql # Fraud schema
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ 003_create_device_fingerprints.sql # Device schema
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ 004_create_audit_logs.sql # Audit schema
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ 005_create_offline_redemptions.sql # Offline schema
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ external-services/           # External Service Adapters
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ScanditSDKService.ts         # Scandit SDK integration
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PaymentGatewayService.ts     # Payment processing
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FraudMLService.ts            # ML fraud detection
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ POSSystemService.ts          # POS integration
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AuditLogService.ts           # Audit logging
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DeviceFingerprintService.ts  # Device fingerprinting
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ GeoLocationService.ts        # Geolocation verification
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“‚ config/                      # Configuration
â”‚   â”‚   â”‚       â”œâ”€â”€ redemption.config.ts         # Redemption config
â”‚   â”‚   â”‚       â”œâ”€â”€ fraud.config.ts              # Fraud config
â”‚   â”‚   â”‚       â”œâ”€â”€ payment.config.ts            # Payment config
â”‚   â”‚   â”‚       â”œâ”€â”€ pos.config.ts                # POS config
â”‚   â”‚   â”‚       â”œâ”€â”€ audit.config.ts              # Audit config
â”‚   â”‚   â”‚       â””â”€â”€ ml.config.ts                 # ML config
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ presentation/                    # Presentation Layer
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ controllers/                 # REST Controllers
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RedemptionController.ts      # Redemption endpoints
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ TransactionController.ts     # Transaction endpoints
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FraudController.ts           # Fraud endpoints
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ BarcodeController.ts         # Barcode endpoints
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AuditController.ts           # Audit endpoints
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ POSController.ts             # POS endpoints
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ HealthController.ts          # Health check
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“‚ middleware/                  # Middleware
â”‚   â”‚   â”‚       â”œâ”€â”€ AuthenticationMiddleware.ts  # JWT authentication
â”‚   â”‚   â”‚       â”œâ”€â”€ AuthorizationMiddleware.ts   # RBAC authorization
â”‚   â”‚   â”‚       â”œâ”€â”€ ValidationMiddleware.ts      # Request validation
â”‚   â”‚   â”‚       â”œâ”€â”€ RateLimitMiddleware.ts       # Rate limiting
â”‚   â”‚   â”‚       â”œâ”€â”€ LoggingMiddleware.ts         # Request logging
â”‚   â”‚   â”‚       â”œâ”€â”€ FraudDetectionMiddleware.ts  # Real-time fraud detection
â”‚   â”‚   â”‚       â””â”€â”€ ErrorHandlingMiddleware.ts   # Error handling
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ ğŸ“‚ shared/                          # Service-Specific Shared Code
â”‚   â”‚       â”œâ”€â”€ ğŸ“‚ constants/                   # Constants
â”‚   â”‚       â”‚   â”œâ”€â”€ redemption.constants.ts      # Redemption constants
â”‚   â”‚       â”‚   â”œâ”€â”€ fraud.constants.ts           # Fraud constants
â”‚   â”‚       â”‚   â”œâ”€â”€ transaction.constants.ts     # Transaction constants
â”‚   â”‚       â”‚   â””â”€â”€ api.constants.ts             # API constants
â”‚   â”‚       â”œâ”€â”€ ğŸ“‚ utils/                       # Utilities
â”‚   â”‚       â”‚   â”œâ”€â”€ barcode.utils.ts             # Barcode utilities
â”‚   â”‚       â”‚   â”œâ”€â”€ fraud.utils.ts               # Fraud utilities
â”‚   â”‚       â”‚   â”œâ”€â”€ transaction.utils.ts         # Transaction utilities
â”‚   â”‚       â”‚   â”œâ”€â”€ validation.utils.ts          # Validation utilities
â”‚   â”‚       â”‚   â”œâ”€â”€ encryption.utils.ts          # Encryption utilities
â”‚   â”‚       â”‚   â”œâ”€â”€ audit.utils.ts               # Audit utilities
â”‚   â”‚       â”‚   â””â”€â”€ device.utils.ts              # Device utilities
â”‚   â”‚       â””â”€â”€ ğŸ“‚ exceptions/                  # Custom Exceptions
â”‚   â”‚           â”œâ”€â”€ RedemptionException.ts       # Redemption errors
â”‚   â”‚           â”œâ”€â”€ FraudException.ts            # Fraud errors
â”‚   â”‚           â”œâ”€â”€ TransactionException.ts      # Transaction errors
â”‚   â”‚           â”œâ”€â”€ ValidationException.ts       # Validation errors
â”‚   â”‚           â””â”€â”€ POSException.ts              # POS errors
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ tests/                               # Testing
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ unit/                            # Unit Tests
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ domain/                      # Domain Tests
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ entities/                # Entity Tests
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Redemption.test.ts       # Redemption entity tests
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FraudScore.test.ts       # Fraud entity tests
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Transaction.test.ts      # Transaction entity tests
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ DeviceFingerprint.test.ts # Device entity tests
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“‚ services/                # Service Tests
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ RedemptionDomainService.test.ts # Redemption service tests
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ FraudDetectionDomainService.test.ts # Fraud service tests
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ application/                 # Application Tests
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“‚ use-cases/               # Use Case Tests
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ ProcessRedemptionUseCase.test.ts # Redemption tests
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ CalculateFraudScoreUseCase.test.ts # Fraud tests
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“‚ infrastructure/              # Infrastructure Tests
â”‚   â”‚   â”‚       â””â”€â”€ ğŸ“‚ external-services/       # External Service Tests
â”‚   â”‚   â”‚           â”œâ”€â”€ ScanditSDKService.test.ts # Scandit tests
â”‚   â”‚   â”‚           â””â”€â”€ PaymentGatewayService.test.ts # Payment tests
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ integration/                     # Integration Tests
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ redemption/                  # Redemption Integration
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ redemption-flow.test.ts      # End-to-end redemption
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ fraud/                       # Fraud Integration
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ fraud-detection.test.ts      # Fraud detection flow
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ transaction/                 # Transaction Integration
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ payment-processing.test.ts   # Payment flow
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ pos/                         # POS Integration
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ pos-sync.test.ts             # POS sync flow
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ audit/                       # Audit Integration
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ audit-trail.test.ts          # Audit flow
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“‚ database/                    # Database Integration
â”‚   â”‚   â”‚       â”œâ”€â”€ redemption-repository.test.ts # Redemption DB tests
â”‚   â”‚   â”‚       â””â”€â”€ fraud-repository.test.ts     # Fraud DB tests
â”‚   â”‚   â””â”€â”€ ğŸ“‚ e2e/                             # E2E Tests
â”‚   â”‚       â”œâ”€â”€ ğŸ“‚ redemption/                  # Redemption E2E
â”‚   â”‚       â”‚   â””â”€â”€ complete-redemption-flow.test.ts # Full redemption
â”‚   â”‚       â”œâ”€â”€ ğŸ“‚ fraud/                       # Fraud E2E
â”‚   â”‚       â”‚   â””â”€â”€ fraud-prevention-flow.test.ts # Fraud prevention
â”‚   â”‚       â”œâ”€â”€ ğŸ“‚ pos/                         # POS E2E
â”‚   â”‚       â”‚   â””â”€â”€ offline-pos-sync.test.ts     # Offline POS
â”‚   â”‚       â””â”€â”€ ğŸ“‚ api/                         # API E2E
â”‚   â”‚           â”œâ”€â”€ redemption-api.test.ts       # Redemption API
â”‚   â”‚           â””â”€â”€ fraud-api.test.ts            # Fraud API
â”‚   â”‚
â”‚   â”œâ”€â”€ package.json                            # Node.js dependencies
â”‚   â”œâ”€â”€ tsconfig.json                           # TypeScript configuration
â”‚   â”œâ”€â”€ eslint.config.js                        # ESLint configuration
â”‚   â”œâ”€â”€ jest.config.js                          # Jest testing configuration
â”‚   â”œâ”€â”€ Dockerfile                              # Container definition
â”‚   â”œâ”€â”€ .dockerignore                           # Docker ignore rules
â”‚   â””â”€â”€ docker-compose.yml                      # Local development environment
â”‚
â”œâ”€â”€ ğŸ“‚ k8s/                                     # Kubernetes Manifests
â”‚   â”œâ”€â”€ redemption-deployment.yaml              # Deployment configuration
â”‚   â”œâ”€â”€ redemption-service.yaml                 # Service configuration
â”‚   â”œâ”€â”€ redemption-ingress.yaml                 # Ingress configuration
â”‚   â”œâ”€â”€ redemption-configmap.yaml               # Configuration map
â”‚   â””â”€â”€ redemption-secrets.yaml                 # Secrets configuration
â”‚
â”œâ”€â”€ ğŸ“‚ monitoring/                              # Monitoring & Observability
â”‚   â”œâ”€â”€ ğŸ“‚ prometheus/                          # Prometheus Configuration
â”‚   â”‚   â””â”€â”€ redemption-metrics.yaml             # Metrics configuration
â”‚   â”œâ”€â”€ ğŸ“‚ grafana/                             # Grafana Dashboards
â”‚   â”‚   â””â”€â”€ ğŸ“‚ dashboards/                      # Dashboard Definitions
â”‚   â”‚       â”œâ”€â”€ redemption-dashboard.json       # Redemption metrics
â”‚   â”‚       â””â”€â”€ fraud-detection-dashboard.json  # Fraud metrics
â”‚   â””â”€â”€ ğŸ“‚ alerts/                              # Alert Rules
â”‚       â”œâ”€â”€ redemption-alerts.yaml              # Redemption alerts
â”‚       â””â”€â”€ fraud-alerts.yaml                   # Fraud alerts
â”‚
â”œâ”€â”€ ğŸ“‚ .github/                                 # CI/CD Pipelines
â”‚   â””â”€â”€ ğŸ“‚ workflows/                           # GitHub Actions
â”‚       â”œâ”€â”€ redemption-ci.yml                   # Continuous integration
â”‚       â””â”€â”€ redemption-cd.yml                   # Continuous deployment
â”‚
â”œâ”€â”€ ğŸ“‚ scripts/                                 # Automation Scripts
â”‚   â”œâ”€â”€ setup-redemption-service.sh             # Service setup
â”‚   â”œâ”€â”€ deploy-redemption-service.sh            # Deployment script
â”‚   â”œâ”€â”€ migrate-database.sh                     # Database migration
â”‚   â”œâ”€â”€ backup-redemption-data.sh               # Data backup
â”‚   â””â”€â”€ fraud-model-update.sh                   # ML model update
â”‚
â”œâ”€â”€ ğŸ“‚ docs/                                    # Documentation
â”‚   â”œâ”€â”€ ğŸ“‚ api/                                 # API Documentation
â”‚   â”‚   â”œâ”€â”€ redemption-api.md                   # Redemption API docs
â”‚   â”‚   â”œâ”€â”€ fraud-detection-api.md              # Fraud API docs
â”‚   â”‚   â”œâ”€â”€ transaction-api.md                  # Transaction API docs
â”‚   â”‚   â”œâ”€â”€ barcode-validation-api.md           # Barcode API docs
â”‚   â”‚   â””â”€â”€ pos-integration-api.md              # POS API docs
â”‚   â”œâ”€â”€ ğŸ“‚ architecture/                        # Architecture Documentation
â”‚   â”‚   â”œâ”€â”€ redemption-architecture.md          # Architecture guide
â”‚   â”‚   â””â”€â”€ fraud-detection-architecture.md     # Fraud architecture
â”‚   â”œâ”€â”€ ğŸ“‚ security/                            # Security Documentation
â”‚   â”‚   â””â”€â”€ redemption-security.md              # Security guide
â”‚   â””â”€â”€ ğŸ“‚ operations/                          # Operations Documentation
â”‚       â”œâ”€â”€ redemption-runbook.md               # Operations guide
â”‚       â””â”€â”€ fraud-model-management.md           # ML model guide
â”‚
â”œâ”€â”€ README.md                                   # Project overview
â”œâ”€â”€ CHANGELOG.md                                # Version history
â”œâ”€â”€ LICENSE                                     # License information
â””â”€â”€ .env.example                                # Environment variables template
```

---

## ğŸ”§ **IMPLEMENTATION CHECKLIST**

### **Phase 1: PROJECT SETUP & SHARED PACKAGES** âš™ï¸

#### **1.1 Khá»Ÿi táº¡o dá»± Ã¡n repository**
- [ ] **Táº¡o redemption-transaction-service repository**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part06.2.1 Layered Architecture + EMSA-v1.0 Standards
  - *MÃ´ táº£*: Thiáº¿t láº­p repository vá»›i Clean Architecture structure
  - *File táº¡o*: `package.json`, `README.md`, `.gitignore`, toÃ n bá»™ folder structure
  - *Ã nghÄ©a*: Single repository cho complete Redemption service, EMSA-v1.0 compliant

#### **1.2 Setup Shared Packages Dependencies**
- [ ] **Install shared NPM packages**
  - *Tham chiáº¿u*: EMSA-v1.0 Package Standards
  - *MÃ´ táº£*: Install @psp/shared-core, @psp/shared-events, @psp/shared-database
  - *File táº¡o*: Updated `package.json` vá»›i proper versions
  - *Ã nghÄ©a*: Consistent shared utilities across microservices

#### **1.3 Configuration Files Setup**
- [ ] **Setup project configuration files**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part02.8 Technical Requirements
  - *MÃ´ táº£*: TypeScript, ESLint, Jest configurations theo EMSA-v1.0
  - *File táº¡o*: `tsconfig.json`, `eslint.config.js`, `jest.config.js`
  - *Ã nghÄ©a*: Standardized development environment

#### **1.4 Database Setup**
- [ ] **Thiáº¿t láº­p PostgreSQL cho redemption data**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part07.4 Redemption Database Design
  - *MÃ´ táº£*: PostgreSQL 15+ vá»›i redemption, fraud, transaction schemas
  - *File táº¡o*: `backend/prisma/schema.prisma`, database connection config
  - *Ã nghÄ©a*: Robust data persistence cho redemption workflows

### **Phase 2: DOMAIN LAYER IMPLEMENTATION** ğŸ—ƒï¸

#### **2.1 Core Entities Implementation**
- [ ] **Implement Redemption Entity**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part04.3.1 Barcode Redemption (FR-007)
  - *MÃ´ táº£*: Redemption entity vá»›i business rules, status transitions, validation
  - *File táº¡o*: `backend/src/domain/entities/Redemption.ts`
  - *Ã nghÄ©a*: Core redemption business logic encapsulation

- [ ] **Implement FraudScore Entity**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part04.3.5 Fraud Detection (FR-011)
  - *MÃ´ táº£*: Fraud detection entity vá»›i ML scoring, risk assessment
  - *File táº¡o*: `backend/src/domain/entities/FraudScore.ts`
  - *Ã nghÄ©a*: ML-based fraud prevention logic

- [ ] **Implement Transaction Entity**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part04.3.1 Barcode Redemption
  - *MÃ´ táº£*: Transaction entity vá»›i payment processing, refund handling
  - *File táº¡o*: `backend/src/domain/entities/Transaction.ts`
  - *Ã nghÄ©a*: Financial transaction management

- [ ] **Implement DeviceFingerprint Entity**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part04.3.5 Fraud Detection
  - *MÃ´ táº£*: Device fingerprinting entity cho fraud prevention
  - *File táº¡o*: `backend/src/domain/entities/DeviceFingerprint.ts`
  - *Ã nghÄ©a*: Device-based security vÃ  fraud detection

#### **2.2 Value Objects Implementation**
- [ ] **Implement BarcodeValue Value Object**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part04.3.1 Barcode Redemption
  - *MÃ´ táº£*: Barcode value object vá»›i format validation, QR verification
  - *File táº¡o*: `backend/src/domain/value-objects/BarcodeValue.ts`
  - *Ã nghÄ©a*: Type-safe barcode handling vá»›i validation

- [ ] **Implement FraudRiskLevel Value Object**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part04.3.5 Fraud Detection
  - *MÃ´ táº£*: Fraud risk assessment vá»›i categorization (Low/Medium/High)
  - *File táº¡o*: `backend/src/domain/value-objects/FraudRiskLevel.ts`
  - *Ã nghÄ©a*: Standardized risk assessment levels

- [ ] **Implement RedemptionStatus Value Object**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part04.3.1 Barcode Redemption
  - *MÃ´ táº£*: Redemption status management vá»›i state transition rules
  - *File táº¡o*: `backend/src/domain/value-objects/RedemptionStatus.ts`
  - *Ã nghÄ©a*: Controlled redemption state transitions

#### **2.3 Domain Services Implementation**
- [ ] **Implement RedemptionDomainService**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part04.3.1 Barcode Redemption
  - *MÃ´ táº£*: Complex redemption business logic, workflow orchestration
  - *File táº¡o*: `backend/src/domain/services/RedemptionDomainService.ts`
  - *Ã nghÄ©a*: Centralized redemption business rules

- [ ] **Implement FraudDetectionDomainService**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part04.3.5 Fraud Detection
  - *MÃ´ táº£*: ML fraud scoring algorithms, risk calculation
  - *File táº¡o*: `backend/src/domain/services/FraudDetectionDomainService.ts`
  - *Ã nghÄ©a*: Advanced fraud detection capabilities

### **Phase 3: APPLICATION LAYER IMPLEMENTATION** ğŸ“„

#### **3.1 Use Cases Implementation**
- [ ] **Implement Redemption Use Cases**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part04.3.1 Barcode Redemption (FR-007)
  - *MÃ´ táº£*: Main redemption workflows, validation, offline processing
  - *File táº¡o*: `ProcessRedemptionUseCase.ts`, `ValidateBarcodeUseCase.ts`, `ProcessOfflineRedemptionUseCase.ts`, `GetRedemptionStatusUseCase.ts`, `CancelRedemptionUseCase.ts`
  - *Ã nghÄ©a*: Complete redemption workflow support

- [ ] **Implement Fraud Detection Use Cases**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part04.3.5 Fraud Detection (FR-011)
  - *MÃ´ táº£*: Fraud scoring, alert processing, device fingerprinting
  - *File táº¡o*: `CalculateFraudScoreUseCase.ts`, `ProcessFraudAlertUseCase.ts`, `CreateDeviceFingerprintUseCase.ts`, `CheckDeviceRiskUseCase.ts`, `UpdateFraudRulesUseCase.ts`
  - *Ã nghÄ©a*: Comprehensive fraud prevention system

- [ ] **Implement Transaction Use Cases**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part04.3.1 Barcode Redemption
  - *MÃ´ táº£*: Payment processing, refunds, transaction history
  - *File táº¡o*: `CreateTransactionUseCase.ts`, `ProcessPaymentUseCase.ts`, `RefundTransactionUseCase.ts`, `GetTransactionHistoryUseCase.ts`
  - *Ã nghÄ©a*: Complete transaction management

#### **3.2 CQRS Handlers Implementation**
- [ ] **Implement Command Handlers**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part06.2.3 CQRS Pattern
  - *MÃ´ táº£*: CQRS command handlers cho redemption, transaction, fraud
  - *File táº¡o*: `ProcessRedemptionHandler.ts`, `ProcessTransactionHandler.ts`, `FraudDetectionHandler.ts`
  - *Ã nghÄ©a*: Scalable command processing architecture

- [ ] **Implement Query Handlers**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part06.2.3 CQRS Pattern
  - *MÃ´ táº£*: CQRS query handlers cho data retrieval
  - *File táº¡o*: `GetRedemptionQueryHandler.ts`, `GetTransactionQueryHandler.ts`, `GetFraudScoreQueryHandler.ts`
  - *Ã nghÄ©a*: Optimized read operations

### **Phase 4: INFRASTRUCTURE LAYER IMPLEMENTATION** ğŸ—ï¸

#### **4.1 Repository Implementations**
- [ ] **Implement PostgreSQL Repositories**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part07.4.1 Redemption Table + Part07.4.2 Fraud_Score Table
  - *MÃ´ táº£*: Concrete repository implementations vá»›i Prisma ORM
  - *File táº¡o*: `RedemptionRepository.ts`, `TransactionRepository.ts`, `FraudScoreRepository.ts`, `DeviceFingerprintRepository.ts`, `RedemptionAuditRepository.ts`
  - *Ã nghÄ©a*: Data access layer cho redemption operations

#### **4.2 External Services Implementation**
- [ ] **Implement Scandit SDK Service**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part09.2.1 Scandit SDK Integration
  - *MÃ´ táº£*: QR/barcode scanning capability integration
  - *File táº¡o*: `backend/src/infrastructure/external-services/ScanditSDKService.ts`
  - *Ã nghÄ©a*: Professional barcode scanning functionality

- [ ] **Implement Payment Gateway Service**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part09.3 Payment Integration
  - *MÃ´ táº£*: Payment processing integration vá»›i external providers
  - *File táº¡o*: `backend/src/infrastructure/external-services/PaymentGatewayService.ts`
  - *Ã nghÄ©a*: Secure payment processing capability

- [ ] **Implement ML Fraud Detection Service**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part04.3.5 Fraud Detection
  - *MÃ´ táº£*: Machine learning fraud detection integration
  - *File táº¡o*: `backend/src/infrastructure/external-services/FraudMLService.ts`
  - *Ã nghÄ©a*: Advanced AI-powered fraud prevention

- [ ] **Implement POS System Service**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part09.2 POS Integration
  - *MÃ´ táº£*: Point-of-sale system integration cho offline redemption
  - *File táº¡o*: `backend/src/infrastructure/external-services/POSSystemService.ts`
  - *Ã nghÄ©a*: Offline redemption capability

#### **4.3 Configuration Implementation**
- [ ] **Implement Service Configurations**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part02.8 Technical Requirements
  - *MÃ´ táº£*: Service-specific configuration management
  - *File táº¡o*: `redemption.config.ts`, `fraud.config.ts`, `payment.config.ts`, `pos.config.ts`, `audit.config.ts`, `ml.config.ts`
  - *Ã nghÄ©a*: Centralized configuration cho service components

### **Phase 5: PRESENTATION LAYER IMPLEMENTATION** ğŸŒ

#### **5.1 REST API Controllers**
- [ ] **Implement API Controllers**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part08.3.1 Redemption APIs + Part08.3.2 Fraud Detection APIs
  - *MÃ´ táº£*: REST API controllers cho redemption, fraud, transaction management
  - *File táº¡o*: `RedemptionController.ts`, `TransactionController.ts`, `FraudController.ts`, `BarcodeController.ts`, `AuditController.ts`, `POSController.ts`, `HealthController.ts`
  - *Ã nghÄ©a*: Complete API endpoints supporting full functionality

#### **5.2 Security Middleware**
- [ ] **Implement Security Middleware**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part05.3 Security Requirements + Access_Control_Tree_Grok.md
  - *MÃ´ táº£*: Authentication, authorization, validation, rate limiting middleware
  - *File táº¡o*: `AuthenticationMiddleware.ts`, `AuthorizationMiddleware.ts`, `ValidationMiddleware.ts`, `RateLimitMiddleware.ts`, `LoggingMiddleware.ts`, `FraudDetectionMiddleware.ts`, `ErrorHandlingMiddleware.ts`
  - *Ã nghÄ©a*: Comprehensive security enforcement cho API access

#### **5.3 Service-Specific Shared Code Implementation**
- [ ] **Implement Service-Specific Constants vÃ  Utils**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part04.3.1 Barcode Redemption + Part04.3.5 Fraud Detection
  - *MÃ´ táº£*: Redemption, fraud, transaction constants vÃ  utilities
  - *File táº¡o*: Constants files, utility functions, custom exceptions
  - *Ã nghÄ©a*: Reusable service-specific code components

### **Phase 6: TESTING IMPLEMENTATION** ğŸ§ª

#### **6.1 Unit Testing**
- [ ] **Implement Domain Unit Tests**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part15.1 Testing Strategy
  - *MÃ´ táº£*: Entity, value object, domain service unit tests
  - *File táº¡o*: 10+ unit test files cho domain layer
  - *Ã nghÄ©a*: Ensure business logic correctness

- [ ] **Implement Application Unit Tests**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part15.1 Testing Strategy
  - *MÃ´ táº£*: Use case, handler unit tests
  - *File táº¡o*: 15+ unit test files cho application layer
  - *Ã nghÄ©a*: Validate application workflows

#### **6.2 Integration Testing**
- [ ] **Implement Integration Tests**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part15.1 Testing Strategy
  - *MÃ´ táº£*: Database, external service, API integration tests
  - *File táº¡o*: 7+ integration test files
  - *Ã nghÄ©a*: Verify component interactions

#### **6.3 End-to-End Testing**
- [ ] **Implement E2E Tests**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part15.1 Testing Strategy
  - *MÃ´ táº£*: Complete workflow, API, system E2E tests
  - *File táº¡o*: 5+ E2E test files
  - *Ã nghÄ©a*: Validate complete system functionality

### **Phase 7: DEVOPS & DEPLOYMENT** ğŸš€

#### **7.1 Containerization**
- [ ] **Setup Docker Configuration**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part14.1 Containerization
  - *MÃ´ táº£*: Docker containerization cho service deployment
  - *File táº¡o*: `Dockerfile`, `.dockerignore`, `docker-compose.yml`
  - *Ã nghÄ©a*: Consistent deployment environment

#### **7.2 Kubernetes Deployment**
- [ ] **Setup Kubernetes Manifests**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part14.2 Kubernetes Deployment
  - *MÃ´ táº£*: Production-ready Kubernetes deployment configuration
  - *File táº¡o*: `redemption-deployment.yaml`, `redemption-service.yaml`, `redemption-ingress.yaml`, `redemption-configmap.yaml`, `redemption-secrets.yaml`
  - *Ã nghÄ©a*: Scalable production deployment

#### **7.3 CI/CD Pipeline**
- [ ] **Setup CI/CD Automation**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part15.2 CI/CD Pipelines
  - *MÃ´ táº£*: Automated testing, building, deployment pipeline
  - *File táº¡o*: `.github/workflows/redemption-ci.yml`, `redemption-cd.yml`
  - *Ã nghÄ©a*: Automated quality assurance vÃ  deployment

#### **7.4 Monitoring & Observability**
- [ ] **Setup Monitoring Stack**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part14.3 Monitoring Stack
  - *MÃ´ táº£*: Prometheus metrics, Grafana dashboards, alerting
  - *File táº¡o*: `monitoring/prometheus/redemption-metrics.yaml`, `monitoring/grafana/dashboards/redemption-dashboard.json`, `monitoring/grafana/dashboards/fraud-detection-dashboard.json`
  - *Ã nghÄ©a*: Production monitoring vÃ  alerting

### **Phase 8: DOCUMENTATION & AUTOMATION** ğŸ“š

#### **8.1 API Documentation**
- [ ] **Create API Documentation**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part08.3.1 Redemption APIs + Part08.3.2 Fraud Detection APIs
  - *MÃ´ táº£*: Complete API documentation vá»›i examples
  - *File táº¡o*: `docs/api/redemption-api.md`, `fraud-detection-api.md`, `transaction-api.md`, `barcode-validation-api.md`, `pos-integration-api.md`
  - *Ã nghÄ©a*: Developer onboarding vÃ  service integration

#### **8.2 Architecture Documentation**
- [ ] **Create Architecture Guides**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part06.2.1 Layered Architecture + EMSA-v1.0
  - *MÃ´ táº£*: Clean Architecture implementation guide, fraud detection architecture
  - *File táº¡o*: `docs/architecture/redemption-architecture.md`, `docs/architecture/fraud-detection-architecture.md`
  - *Ã nghÄ©a*: Architectural understanding vÃ  maintenance

#### **8.3 Security Documentation**
- [ ] **Create Security Documentation**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part05.3 Security Requirements
  - *MÃ´ táº£*: Security implementation guide, fraud prevention strategies
  - *File táº¡o*: `docs/security/redemption-security.md`
  - *Ã nghÄ©a*: Security compliance vÃ  best practices

#### **8.4 Operations Documentation**
- [ ] **Create Operations Guides**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part14.3 Monitoring Stack
  - *MÃ´ táº£*: Operational procedures, ML model management, runbooks
  - *File táº¡o*: `docs/operations/redemption-runbook.md`, `docs/operations/fraud-model-management.md`
  - *Ã nghÄ©a*: Operational excellence vÃ  incident response

#### **8.5 Automation Scripts**
- [ ] **Create Automation Scripts**
  - *Tham chiáº¿u*: SRS-Grok-V2.md - Part15.2 CI/CD Pipelines
  - *MÃ´ táº£*: Service setup, deployment, data management, ML model update scripts
  - *File táº¡o*: `scripts/setup-redemption-service.sh`, `deploy-redemption-service.sh`, `migrate-database.sh`, `backup-redemption-data.sh`, `fraud-model-update.sh`
  - *Ã nghÄ©a*: Operational efficiency vÃ  consistency

---

## ğŸ“‹ **PACKAGE.JSON CHO REDEMPTION SERVICE**

```json
{
  "name": "redemption-transaction-service",
  "version": "1.0.0",
  "description": "PSP Redemption & Transaction Service vá»›i Fraud Detection",
  "main": "dist/src/main.js",
  "scripts": {
    "build": "tsc",
    "start": "node dist/src/main.js",
    "start:dev": "ts-node-dev --respawn --transpile-only src/main.ts",
    "test": "jest",
    "test:watch": "jest --watch",
    "test:coverage": "jest --coverage",
    "test:e2e": "jest --config ./tests/e2e/jest-e2e.json",
    "lint": "eslint src/**/*.ts",
    "lint:fix": "eslint src/**/*.ts --fix",
    "prisma:generate": "prisma generate",
    "prisma:migrate": "prisma migrate dev",
    "prisma:deploy": "prisma migrate deploy",
    "docker:build": "docker build -t redemption-service .",
    "docker:run": "docker run -p 3003:3003 redemption-service"
  },
  "dependencies": {
    "@psp/shared-core": "^1.2.0",           // Logger, validation, crypto utilities
    "@psp/shared-events": "^1.1.0",         // Domain events contracts
    "@psp/shared-database": "^1.0.5",       // DB connection utilities
    "@nestjs/common": "^10.0.0",
    "@nestjs/core": "^10.0.0",
    "@nestjs/platform-express": "^10.0.0",
    "@nestjs/cqrs": "^10.0.0",
    "@nestjs/jwt": "^10.0.0",
    "@nestjs/passport": "^10.0.0",
    "@nestjs/swagger": "^7.0.0",
    "@nestjs/throttler": "^5.0.0",
    "@prisma/client": "^5.0.0",
    "bcryptjs": "^2.4.3",
    "class-transformer": "^0.5.1",
    "class-validator": "^0.14.0",
    "helmet": "^7.0.0",
    "joi": "^17.9.0",
    "passport": "^0.6.0",
    "passport-jwt": "^4.0.1",
    "redis": "^4.6.0",
    "rxjs": "^7.8.0",
    "uuid": "^9.0.0"
  },
  "devDependencies": {
    "@types/bcryptjs": "^2.4.2",
    "@types/jest": "^29.5.0",
    "@types/node": "^20.0.0",
    "@types/passport-jwt": "^3.0.8",
    "@types/uuid": "^9.0.0",
    "@typescript-eslint/eslint-plugin": "^6.0.0",
    "@typescript-eslint/parser": "^6.0.0",
    "eslint": "^8.0.0",
    "eslint-config-prettier": "^9.0.0",
    "eslint-plugin-prettier": "^5.0.0",
    "jest": "^29.5.0",
    "prettier": "^3.0.0",
    "prisma": "^5.0.0",
    "supertest": "^6.3.0",
    "ts-jest": "^29.1.0",
    "ts-node": "^10.9.0",
    "ts-node-dev": "^2.0.0",
    "typescript": "^5.0.0"
  },
  "jest": {
    "moduleFileExtensions": ["js", "json", "ts"],
    "rootDir": ".",
    "testRegex": ".*\\.test\\.ts$",
    "transform": {
      "^.+\\.(t|j)s$": "ts-jest"
    },
    "collectCoverageFrom": [
      "src/**/*.(t|j)s",
      "!src/**/*.test.(t|j)s",
      "!src/**/*.spec.(t|j)s"
    ],
    "coverageDirectory": "./coverage",
    "testEnvironment": "node",
    "coverageThreshold": {
      "global": {
        "branches": 80,
        "functions": 80,
        "lines": 80,
        "statements": 80
      }
    }
  },
  "keywords": [
    "redemption",
    "transaction",
    "fraud-detection",
    "barcode",
    "qr-code",
    "payment",
    "microservice",
    "nestjs",
    "prisma",
    "postgresql",
    "psp"
  ],
  "author": "PSP Development Team",
  "license": "MIT"
}
```

---

## ğŸ¯ **Káº¾T LUáº¬N**

**Tá»•ng sá»‘ files Ä‘Æ°á»£c map**: 164 files vá»›i Ä‘áº§y Ä‘á»§ SRS references  
**Backend Clean Architecture**: 89 files vá»›i proper layering theo EMSA-v1.0  
**Shared Packages Integration**: 3 NPM packages cho cross-service utilities  
**API Coverage**: Complete REST endpoints cho Redemption, Transaction, Fraud Detection  
**Security Implementation**: 7 middleware files vá»›i comprehensive security  
**ML Integration**: Advanced fraud detection vá»›i machine learning scoring  
**Testing Strategy**: 37 test files coverage (Unit, Integration, E2E)  
**External Services**: 7 external service integrations (Scandit, Payment, ML, POS)  
**Deployment & DevOps**: 17 infrastructure files vá»›i K8s + monitoring  
**Documentation**: 12 comprehensive docs cho development + operations  

**Estimated timeline**: 10-12 tuáº§n cho 1 team (4-5 developers)  
**SRS coverage**: 100% cho Redemption domain (FR-007, FR-011)  
**EMSA-v1.0 compliance**: Full compliance vá»›i Clean Architecture standards  
**Integration points**: Ready cho Campaign, Identity, Analytics services integration  
**Advanced capabilities**: ML fraud detection, offline POS sync, device fingerprinting  
**Professional standards**: NPM packages approach, semantic versioning, CI/CD automation  

**Sub-Project 3 hoÃ n chá»‰nh! Redemption & Transaction Service vá»›i complete backend implementation, advanced fraud detection, vÃ  ML integration theo EMSA-v1.0 vÃ  SRS specifications! ğŸš€**
