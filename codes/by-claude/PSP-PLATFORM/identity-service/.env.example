# ==============================================
# PSP PLATFORM - ENVIRONMENT CONFIGURATION
# ==============================================
# Copy this file to .env and fill in your values
# NEVER commit actual .env files to version control

# ==============================================
# APPLICATION CONFIGURATION
# ==============================================
NODE_ENV=development
PORT=3000
API_VERSION=v1
SERVICE_NAME=identity-service
APP_NAME=PSP Identity & Authentication Service

# ==============================================
# DATABASE CONFIGURATION (PostgreSQL)
# ==============================================
# Primary Database
DATABASE_URL=postgresql://username:password@localhost:5432/psp_identity_dev
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=psp_identity_dev
DATABASE_USERNAME=username
DATABASE_PASSWORD=password
DATABASE_SCHEMA=public
DATABASE_SSL=false
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10
DATABASE_TIMEOUT=30000

# Test Database
DATABASE_URL_TEST=postgresql://username:password@localhost:5432/psp_identity_test

# ==============================================
# REDIS CONFIGURATION (Cache & Sessions)
# ==============================================
REDIS_URL=redis://localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_TTL=3600
REDIS_SESSION_TTL=86400

# ==============================================
# JWT CONFIGURATION
# ==============================================
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_REFRESH_SECRET=your-super-secret-refresh-key-change-this-in-production
JWT_ACCESS_TOKEN_EXPIRES_IN=15m
JWT_REFRESH_TOKEN_EXPIRES_IN=7d
JWT_ISSUER=psp-platform
JWT_AUDIENCE=psp-users

# ==============================================
# OTP CONFIGURATION
# ==============================================
OTP_SECRET=your-otp-secret-key
OTP_EXPIRES_IN=300
OTP_LENGTH=6
OTP_MAX_ATTEMPTS=3
OTP_COOL_DOWN=60

# ==============================================
# TWILIO CONFIGURATION (SMS)
# ==============================================
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_PHONE_NUMBER=+1234567890
TWILIO_VERIFY_SERVICE_SID=your-verify-service-sid

# ==============================================
# SENDGRID CONFIGURATION (EMAIL)
# ==============================================
SENDGRID_API_KEY=your-sendgrid-api-key
SENDGRID_FROM_EMAIL=noreply@psp-platform.com
SENDGRID_FROM_NAME=PSP Platform
SENDGRID_TEMPLATE_OTP=d-your-otp-template-id
SENDGRID_TEMPLATE_WELCOME=d-your-welcome-template-id
SENDGRID_TEMPLATE_PASSWORD_RESET=d-your-password-reset-template-id

# ==============================================
# LOGGING CONFIGURATION
# ==============================================
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE_ENABLED=true
LOG_FILE_PATH=logs/application.log
LOG_FILE_MAX_SIZE=10m
LOG_FILE_MAX_FILES=5
LOG_CONSOLE_ENABLED=true

# ==============================================
# CORS CONFIGURATION
# ==============================================
CORS_ORIGIN=http://localhost:3000,http://localhost:3001
CORS_METHODS=GET,HEAD,PUT,PATCH,POST,DELETE,OPTIONS
CORS_CREDENTIALS=true

# ==============================================
# RATE LIMITING
# ==============================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false

# ==============================================
# SECURITY CONFIGURATION
# ==============================================
BCRYPT_SALT_ROUNDS=12
HELMET_ENABLED=true
CSRF_ENABLED=true
SESSION_SECRET=your-session-secret-change-this-in-production

# ==============================================
# MONITORING & OBSERVABILITY
# ==============================================
METRICS_ENABLED=true
METRICS_PORT=9090
HEALTH_CHECK_ENABLED=true
TRACING_ENABLED=true
JAEGER_ENDPOINT=http://localhost:14268/api/traces

# ==============================================
# EXTERNAL SERVICE ENDPOINTS
# ==============================================
CRM_SERVICE_URL=http://localhost:3002
NOTIFICATION_SERVICE_URL=http://localhost:3003
AUDIT_SERVICE_URL=http://localhost:3004

# ==============================================
# KUBERNETES & DEPLOYMENT
# ==============================================
KUBERNETES_NAMESPACE=psp-platform
SERVICE_ACCOUNT_NAME=identity-service
POD_NAME=identity-service-pod

# ==============================================
# DEVELOPMENT TOOLS
# ==============================================
DEBUG=psp:*
PRISMA_CLI_QUERY_ENGINE_TYPE=binary
PRISMA_CLI_BINARY_TARGETS=native

# ==============================================
# TESTING CONFIGURATION
# ==============================================
TEST_DATABASE_URL=postgresql://username:password@localhost:5432/psp_identity_test
TEST_REDIS_URL=redis://localhost:6379/1
TEST_TIMEOUT=30000
JEST_WORKERS=2

# ==============================================
# FEATURE FLAGS
# ==============================================
FEATURE_OTP_EMAIL_ENABLED=true
FEATURE_OTP_SMS_ENABLED=true
FEATURE_AUDIT_LOGGING_ENABLED=true
FEATURE_RATE_LIMITING_ENABLED=true
FEATURE_METRICS_ENABLED=true
