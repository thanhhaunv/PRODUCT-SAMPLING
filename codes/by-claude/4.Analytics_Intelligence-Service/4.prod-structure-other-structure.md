# üöÄ Sub-Project 4: Analytics & Intelligence Service - Complete Implementation Guide

## üìã **B·∫¢NG T·ªîNG H·ª¢P T·∫§T C·∫¢ FILES V√Ä REFERENCES**

| **Category** | **File Path** | **M√¥ t·∫£** | **SRS Reference** | **Business Purpose** |
|-------------|---------------|-----------|-------------------|-------------------|
| **üî¶ SHARED PACKAGES** | | | | |
| Core Package | `@psp/shared-core@1.2.0` | Common utilities package | Part02.8 Technical Requirements | Cross-service utilities (logger, validation, crypto) |
| Events Package | `@psp/shared-events@1.1.0` | Domain events contracts | Part06.1.2 Event Bus | Event-driven communication between services |
| Database Package | `@psp/shared-database@1.0.5` | Database utilities | Part07.1 Data Model Overview | DB connection management, migrations |
| **üóÉÔ∏è BACKEND DOMAIN** | | | | |
| Entities | `backend/src/domain/entities/AnalyticsEvent.ts` | Core analytics event entity v·ªõi business rules | Part04.3.2 Real Time Analytics (FR-008) | Encapsulate event tracking logic, metrics collection |
| Entities | `backend/src/domain/entities/ABTestExperiment.ts` | A/B test experiment entity | Part04.5.1 A/B Testing (FR-012) | Manage A/B testing workflows v√† experiments |
| Entities | `backend/src/domain/entities/Recommendation.ts` | Recommendation entity v·ªõi ML integration | Part04.5.2 Recommendation Engine (FR-013) | Personalized recommendation logic |
| Entities | `backend/src/domain/entities/Report.ts` | Report entity v·ªõi template management | Part04.5.3 Advanced Reporting (FR-014) | Custom report generation v√† scheduling |
| Entities | `backend/src/domain/entities/Dashboard.ts` | Dashboard entity cho real-time metrics | Part04.3.2 Real Time Analytics | Interactive dashboard configuration |
| Entities | `backend/src/domain/entities/MetricDefinition.ts` | Metric definition entity | Part04.3.2 Real Time Analytics | Define custom metrics v√† calculations |
| Entities | `backend/src/domain/entities/DataExport.ts` | Data export entity | Part04.5.3 Advanced Reporting | Manage data export workflows |
| Value Objects | `backend/src/domain/value-objects/MetricValue.ts` | Metric value object with validation | Part04.3.2 Real Time Analytics | Type-safe metric handling |
| Value Objects | `backend/src/domain/value-objects/ExperimentVariant.ts` | A/B test variant value object | Part04.5.1 A/B Testing | Experiment variant configuration |
| Value Objects | `backend/src/domain/value-objects/RecommendationScore.ts` | Recommendation scoring value object | Part04.5.2 Recommendation Engine | ML model scoring v√† ranking |
| Value Objects | `backend/src/domain/value-objects/ReportFormat.ts` | Report format value object | Part04.5.3 Advanced Reporting | Report output format validation |
| Value Objects | `backend/src/domain/value-objects/TimeRange.ts` | Time range value object | Part04.3.2 Real Time Analytics | Date range validation v√† calculations |
| Repositories | `backend/src/domain/repositories/IAnalyticsEventRepository.ts` | Analytics event repository interface | Part06.2.1 Layered Architecture | Domain layer interface |
| Repositories | `backend/src/domain/repositories/IABTestRepository.ts` | A/B test repository interface | Part06.2.1 Layered Architecture | Experiment data access contract |
| Repositories | `backend/src/domain/repositories/IRecommendationRepository.ts` | Recommendation repository interface | Part06.2.1 Layered Architecture | ML model storage contract |
| Repositories | `backend/src/domain/repositories/IReportRepository.ts` | Report repository interface | Part06.2.1 Layered Architecture | Report management contract |
| Repositories | `backend/src/domain/repositories/IDashboardRepository.ts` | Dashboard repository interface | Part06.2.1 Layered Architecture | Dashboard configuration contract |
| Domain Services | `backend/src/domain/services/AnalyticsDomainService.ts` | Analytics business logic service | Part04.3.2 Real Time Analytics | Complex analytics calculations |
| Domain Services | `backend/src/domain/services/ABTestDomainService.ts` | A/B testing business logic | Part04.5.1 A/B Testing | Statistical analysis algorithms |
| Domain Services | `backend/src/domain/services/RecommendationDomainService.ts` | Recommendation engine logic | Part04.5.2 Recommendation Engine | ML model orchestration |
| Domain Services | `backend/src/domain/services/ReportGenerationDomainService.ts` | Report generation business logic | Part04.5.3 Advanced Reporting | Report building algorithms |
| **üìÑ BACKEND APPLICATION** | | | | |
| Use Cases | `backend/src/application/use-cases/analytics/TrackEventUseCase.ts` | Event tracking workflow | Part04.3.2 Real Time Analytics (FR-008) | Track user interactions v√† campaign events |
| Use Cases | `backend/src/application/use-cases/analytics/GetRealTimeMetricsUseCase.ts` | Real-time metrics retrieval | Part04.3.2 Real Time Analytics | Live dashboard data |
| Use Cases | `backend/src/application/use-cases/analytics/CreateDashboardUseCase.ts` | Dashboard creation workflow | Part04.3.2 Real Time Analytics | Custom dashboard setup |
| Use Cases | `backend/src/application/use-cases/analytics/UpdateDashboardUseCase.ts` | Dashboard modification logic | Part04.3.2 Real Time Analytics | Dashboard configuration updates |
| Use Cases | `backend/src/application/use-cases/analytics/GetHistoricalDataUseCase.ts` | Historical data retrieval | Part04.3.2 Real Time Analytics | Historical analytics access |
| Use Cases | `backend/src/application/use-cases/ab-testing/CreateExperimentUseCase.ts` | A/B test creation workflow | Part04.5.1 A/B Testing (FR-012) | Experiment setup process |
| Use Cases | `backend/src/application/use-cases/ab-testing/RunExperimentUseCase.ts` | A/B test execution logic | Part04.5.1 A/B Testing | Experiment execution workflow |
| Use Cases | `backend/src/application/use-cases/ab-testing/AnalyzeExperimentUseCase.ts` | A/B test analysis workflow | Part04.5.1 A/B Testing | Statistical analysis processing |
| Use Cases | `backend/src/application/use-cases/ab-testing/StopExperimentUseCase.ts` | A/B test termination logic | Part04.5.1 A/B Testing | Experiment conclusion workflow |
| Use Cases | `backend/src/application/use-cases/ab-testing/GetExperimentResultsUseCase.ts` | A/B test results retrieval | Part04.5.1 A/B Testing | Results reporting |
| Use Cases | `backend/src/application/use-cases/recommendations/GenerateRecommendationsUseCase.ts` | Recommendation generation | Part04.5.2 Recommendation Engine (FR-013) | ML-powered recommendation workflow |
| Use Cases | `backend/src/application/use-cases/recommendations/TrainModelUseCase.ts` | ML model training workflow | Part04.5.2 Recommendation Engine | Model training pipeline |
| Use Cases | `backend/src/application/use-cases/recommendations/UpdateUserPreferencesUseCase.ts` | User preference updates | Part04.5.2 Recommendation Engine | Preference learning workflow |
| Use Cases | `backend/src/application/use-cases/recommendations/GetRecommendationHistoryUseCase.ts` | Recommendation history retrieval | Part04.5.2 Recommendation Engine | Historical recommendation access |
| Use Cases | `backend/src/application/use-cases/reports/CreateReportTemplateUseCase.ts` | Report template creation | Part04.5.3 Advanced Reporting (FR-014) | Custom report template setup |
| Use Cases | `backend/src/application/use-cases/reports/GenerateReportUseCase.ts` | Report generation workflow | Part04.5.3 Advanced Reporting | On-demand report creation |
| Use Cases | `backend/src/application/use-cases/reports/ScheduleReportUseCase.ts` | Report scheduling logic | Part04.5.3 Advanced Reporting | Automated report delivery |
| Use Cases | `backend/src/application/use-cases/reports/ExportDataUseCase.ts` | Data export workflow | Part04.5.3 Advanced Reporting | Data extraction v√† export |
| Use Cases | `backend/src/application/use-cases/reports/GetReportHistoryUseCase.ts` | Report history retrieval | Part04.5.3 Advanced Reporting | Report archive access |
| DTOs | `backend/src/application/dto/AnalyticsEventDTO.ts` | Analytics event data transfer objects | Part08.4.1 Analytics APIs | API contract definitions |
| DTOs | `backend/src/application/dto/ABTestDTO.ts` | A/B testing data transfer objects | Part08.4.2 A/B Testing APIs | Experiment API contracts |
| DTOs | `backend/src/application/dto/RecommendationDTO.ts` | Recommendation data transfer objects | Part08.4.3 Recommendation APIs | ML API contracts |
| DTOs | `backend/src/application/dto/ReportDTO.ts` | Report data transfer objects | Part08.4.4 Reporting APIs | Report API contracts |
| DTOs | `backend/src/application/dto/DashboardDTO.ts` | Dashboard configuration DTOs | Part08.4.1 Analytics APIs | Dashboard API contracts |
| DTOs | `backend/src/application/dto/MetricsDTO.ts` | Metrics data transfer objects | Part08.4.1 Analytics APIs | Metrics API contracts |
| Command Handlers | `backend/src/application/commands/analytics/TrackEventCommand.ts` | Event tracking command handler | Part04.3.2 Real Time Analytics | CQRS event tracking |
| Command Handlers | `backend/src/application/commands/ab-testing/CreateExperimentCommand.ts` | A/B test creation command | Part04.5.1 A/B Testing | CQRS experiment creation |
| Command Handlers | `backend/src/application/commands/recommendations/GenerateRecommendationsCommand.ts` | Recommendation generation command | Part04.5.2 Recommendation Engine | CQRS recommendation workflow |
| Command Handlers | `backend/src/application/commands/reports/GenerateReportCommand.ts` | Report generation command | Part04.5.3 Advanced Reporting | CQRS report generation |
| Query Handlers | `backend/src/application/queries/analytics/GetMetricsQuery.ts` | Metrics retrieval query handler | Part04.3.2 Real Time Analytics | CQRS metrics queries |
| Query Handlers | `backend/src/application/queries/ab-testing/GetExperimentResultsQuery.ts` | A/B test results query | Part04.5.1 A/B Testing | CQRS results queries |
| Query Handlers | `backend/src/application/queries/recommendations/GetRecommendationsQuery.ts` | Recommendations query handler | Part04.5.2 Recommendation Engine | CQRS recommendation queries |
| Query Handlers | `backend/src/application/queries/reports/GetReportQuery.ts` | Report retrieval query handler | Part04.5.3 Advanced Reporting | CQRS report queries |
| **üèóÔ∏è BACKEND INFRASTRUCTURE** | | | | |
| Repositories | `backend/src/infrastructure/persistence/repositories/AnalyticsEventRepository.ts` | Analytics event repository implementation | Part07.5.1 Analytics_Event Table | Event storage implementation |
| Repositories | `backend/src/infrastructure/persistence/repositories/ABTestRepository.ts` | A/B test repository implementation | Part07.5.2 AB_Test Table | Experiment data storage |
| Repositories | `backend/src/infrastructure/persistence/repositories/RecommendationRepository.ts` | Recommendation repository implementation | Part07.5.3 Recommendation Table | ML model storage |
| Repositories | `backend/src/infrastructure/persistence/repositories/ReportRepository.ts` | Report repository implementation | Part07.5.4 Report Table | Report storage implementation |
| Repositories | `backend/src/infrastructure/persistence/repositories/DashboardRepository.ts` | Dashboard repository implementation | Part07.5.5 Dashboard Table | Dashboard configuration storage |
| Models | `backend/src/infrastructure/persistence/models/AnalyticsEventModel.ts` | Analytics event Prisma model | Part07.5.1 Analytics_Event Table | Database schema mapping |
| Models | `backend/src/infrastructure/persistence/models/ABTestModel.ts` | A/B test database model | Part07.5.2 AB_Test Table | Experiment schema mapping |
| Models | `backend/src/infrastructure/persistence/models/RecommendationModel.ts` | Recommendation model definition | Part07.5.3 Recommendation Table | ML schema mapping |
| Models | `backend/src/infrastructure/persistence/models/ReportModel.ts` | Report database model | Part07.5.4 Report Table | Report schema mapping |
| Models | `backend/src/infrastructure/persistence/models/DashboardModel.ts` | Dashboard model definition | Part07.5.5 Dashboard Table | Dashboard schema mapping |
| Migrations | `backend/src/infrastructure/persistence/migrations/001_create_analytics_events.sql` | Analytics event table creation | Part07.5.1 Analytics_Event Table | Event tracking schema setup |
| Migrations | `backend/src/infrastructure/persistence/migrations/002_create_ab_tests.sql` | A/B test tables creation | Part07.5.2 AB_Test Table | Experiment schema setup |
| Migrations | `backend/src/infrastructure/persistence/migrations/003_create_recommendations.sql` | Recommendation table creation | Part07.5.3 Recommendation Table | ML schema setup |
| Migrations | `backend/src/infrastructure/persistence/migrations/004_create_reports.sql` | Report tables creation | Part07.5.4 Report Table | Report schema setup |
| Migrations | `backend/src/infrastructure/persistence/migrations/005_create_dashboards.sql` | Dashboard table creation | Part07.5.5 Dashboard Table | Dashboard schema setup |
| External Services | `backend/src/infrastructure/external-services/MLModelService.ts` | Machine learning model service | Part04.5.2 Recommendation Engine | ML algorithm integration |
| External Services | `backend/src/infrastructure/external-services/ElasticsearchService.ts` | Elasticsearch integration | Part04.3.2 Real Time Analytics | Search v√† analytics engine |
| External Services | `backend/src/infrastructure/external-services/ClickHouseService.ts` | ClickHouse OLAP service | Part04.5.3 Advanced Reporting | Analytical database integration |
| External Services | `backend/src/infrastructure/external-services/RedisAnalyticsCache.ts` | Redis caching for analytics | Part04.3.2 Real Time Analytics | High-performance caching |
| External Services | `backend/src/infrastructure/external-services/ReportExportService.ts` | Report export service | Part04.5.3 Advanced Reporting | PDF/Excel generation service |
| External Services | `backend/src/infrastructure/external-services/StatisticsService.ts` | Statistical analysis service | Part04.5.1 A/B Testing | Statistical calculation library |
| Config | `backend/src/infrastructure/config/analytics.config.ts` | Analytics service configuration | Part02.8 Technical Requirements | Service configuration |
| Config | `backend/src/infrastructure/config/ml.config.ts` | ML service configuration | Part04.5.2 Recommendation Engine | ML model configuration |
| Config | `backend/src/infrastructure/config/elasticsearch.config.ts` | Elasticsearch configuration | Part04.3.2 Real Time Analytics | Search engine configuration |
| Config | `backend/src/infrastructure/config/clickhouse.config.ts` | ClickHouse configuration | Part04.5.3 Advanced Reporting | OLAP database configuration |
| Config | `backend/src/infrastructure/config/redis-analytics.config.ts` | Redis analytics configuration | Part04.3.2 Real Time Analytics | Cache configuration |
| **üåê BACKEND PRESENTATION** | | | | |
| Controllers | `backend/src/presentation/controllers/AnalyticsController.ts` | Analytics REST API controller | Part08.4.1 Analytics APIs | Real-time analytics endpoints |
| Controllers | `backend/src/presentation/controllers/ABTestController.ts` | A/B testing REST API controller | Part08.4.2 A/B Testing APIs | Experiment management endpoints |
| Controllers | `backend/src/presentation/controllers/RecommendationController.ts` | Recommendation REST API controller | Part08.4.3 Recommendation APIs | ML recommendation endpoints |
| Controllers | `backend/src/presentation/controllers/ReportController.ts` | Report REST API controller | Part08.4.4 Reporting APIs | Report generation endpoints |
| Controllers | `backend/src/presentation/controllers/DashboardController.ts` | Dashboard REST API controller | Part08.4.1 Analytics APIs | Dashboard management endpoints |
| Controllers | `backend/src/presentation/controllers/HealthController.ts` | Health check controller | Part02.8 Technical Requirements | Service health monitoring |
| Middleware | `backend/src/presentation/middleware/AnalyticsMiddleware.ts` | Analytics-specific middleware | Part05.3 Security Requirements | Request tracking middleware |
| Middleware | `backend/src/presentation/middleware/RateLimitingMiddleware.ts` | API rate limiting middleware | Part05.3 Security Requirements | API protection middleware |
| Middleware | `backend/src/presentation/middleware/ValidationMiddleware.ts` | Request validation middleware | Part05.7 Input Validation | Input sanitization |
| Middleware | `backend/src/presentation/middleware/LoggingMiddleware.ts` | Request logging middleware | Part14.3 Monitoring Stack | Request tracking v√† auditing |
| **üîß SERVICE-SPECIFIC SHARED CODE** | | | | |
| Constants | `backend/src/shared/constants/analytics.constants.ts` | Analytics service constants | Part04.3.2 Real Time Analytics | Analytics-specific constants |
| Constants | `backend/src/shared/constants/ml.constants.ts` | ML service constants | Part04.5.2 Recommendation Engine | ML model constants |
| Constants | `backend/src/shared/constants/report.constants.ts` | Report service constants | Part04.5.3 Advanced Reporting | Report format constants |
| Utils | `backend/src/shared/utils/statistics.utils.ts` | Statistical calculation utilities | Part04.5.1 A/B Testing | Statistical analysis helpers |
| Utils | `backend/src/shared/utils/metrics.utils.ts` | Metrics calculation utilities | Part04.3.2 Real Time Analytics | Metrics processing helpers |
| Utils | `backend/src/shared/utils/export.utils.ts` | Data export utilities | Part04.5.3 Advanced Reporting | Export format helpers |
| Utils | `backend/src/shared/utils/time-range.utils.ts` | Time range utilities | Part04.3.2 Real Time Analytics | Date range processing |
| Exceptions | `backend/src/shared/exceptions/AnalyticsException.ts` | Analytics-specific exceptions | Part05.3 Security Requirements | Domain-specific error handling |
| Exceptions | `backend/src/shared/exceptions/MLModelException.ts` | ML model exceptions | Part04.5.2 Recommendation Engine | ML error handling |
| Exceptions | `backend/src/shared/exceptions/ReportGenerationException.ts` | Report generation exceptions | Part04.5.3 Advanced Reporting | Report error handling |
| Types | `backend/src/shared/types/analytics.types.ts` | Analytics TypeScript types | Part02.8 Technical Requirements | Type definitions |
| Types | `backend/src/shared/types/ml.types.ts` | ML TypeScript types | Part04.5.2 Recommendation Engine | ML type definitions |
| Types | `backend/src/shared/types/report.types.ts` | Report TypeScript types | Part04.5.3 Advanced Reporting | Report type definitions |
| **üß™ TESTING** | | | | |
| Unit Tests | `backend/src/tests/unit/domain/entities/AnalyticsEvent.test.ts` | Analytics event entity unit tests | Part04.3.2 Real Time Analytics | Entity behavior validation |
| Unit Tests | `backend/src/tests/unit/domain/entities/ABTestExperiment.test.ts` | A/B test entity unit tests | Part04.5.1 A/B Testing | Experiment logic validation |
| Unit Tests | `backend/src/tests/unit/domain/entities/Recommendation.test.ts` | Recommendation entity unit tests | Part04.5.2 Recommendation Engine | ML entity validation |
| Unit Tests | `backend/src/tests/unit/domain/entities/Report.test.ts` | Report entity unit tests | Part04.5.3 Advanced Reporting | Report logic validation |
| Unit Tests | `backend/src/tests/unit/application/use-cases/analytics/TrackEventUseCase.test.ts` | Event tracking use case tests | Part04.3.2 Real Time Analytics | Use case logic validation |
| Unit Tests | `backend/src/tests/unit/application/use-cases/ab-testing/CreateExperimentUseCase.test.ts` | A/B test creation use case tests | Part04.5.1 A/B Testing | Experiment creation validation |
| Unit Tests | `backend/src/tests/unit/application/use-cases/recommendations/GenerateRecommendationsUseCase.test.ts` | Recommendation generation tests | Part04.5.2 Recommendation Engine | ML workflow validation |
| Unit Tests | `backend/src/tests/unit/application/use-cases/reports/GenerateReportUseCase.test.ts` | Report generation use case tests | Part04.5.3 Advanced Reporting | Report generation validation |
| Integration Tests | `backend/src/tests/integration/controllers/AnalyticsController.test.ts` | Analytics API integration tests | Part08.4.1 Analytics APIs | API endpoint validation |
| Integration Tests | `backend/src/tests/integration/controllers/ABTestController.test.ts` | A/B testing API integration tests | Part08.4.2 A/B Testing APIs | Experiment API validation |
| Integration Tests | `backend/src/tests/integration/controllers/RecommendationController.test.ts` | Recommendation API integration tests | Part08.4.3 Recommendation APIs | ML API validation |
| Integration Tests | `backend/src/tests/integration/controllers/ReportController.test.ts` | Report API integration tests | Part08.4.4 Reporting APIs | Report API validation |
| Integration Tests | `backend/src/tests/integration/external-services/MLModelService.test.ts` | ML service integration tests | Part04.5.2 Recommendation Engine | ML integration validation |
| Integration Tests | `backend/src/tests/integration/external-services/ElasticsearchService.test.ts` | Elasticsearch integration tests | Part04.3.2 Real Time Analytics | Search integration validation |
| Integration Tests | `backend/src/tests/integration/persistence/AnalyticsEventRepository.test.ts` | Analytics repository integration tests | Part07.5.1 Analytics_Event Table | Data access validation |
| E2E Tests | `backend/src/tests/e2e/analytics-workflow.test.ts` | End-to-end analytics workflow tests | Part04.3.2 Real Time Analytics | Complete workflow validation |
| E2E Tests | `backend/src/tests/e2e/ab-testing-workflow.test.ts` | End-to-end A/B testing workflow tests | Part04.5.1 A/B Testing | Complete experiment validation |
| E2E Tests | `backend/src/tests/e2e/recommendation-workflow.test.ts` | End-to-end recommendation workflow tests | Part04.5.2 Recommendation Engine | Complete ML workflow validation |
| E2E Tests | `backend/src/tests/e2e/reporting-workflow.test.ts` | End-to-end reporting workflow tests | Part04.5.3 Advanced Reporting | Complete report workflow validation |
| **üê≥ DEVOPS & DEPLOYMENT** | | | | |
| Docker | `backend/Dockerfile` | Analytics service container definition | Part14.1 Container Orchestration | Service containerization |
| Docker | `backend/docker-compose.yml` | Local development docker compose | Part14.1 Container Orchestration | Local development environment |
| Docker | `backend/.dockerignore` | Docker ignore file | Part14.1 Container Orchestration | Build optimization |
| Kubernetes | `backend/k8s/deployment.yaml` | Kubernetes deployment configuration | Part14.1 Container Orchestration | Production deployment |
| Kubernetes | `backend/k8s/service.yaml` | Kubernetes service configuration | Part14.1 Container Orchestration | Service discovery |
| Kubernetes | `backend/k8s/configmap.yaml` | Kubernetes configuration map | Part14.1 Container Orchestration | Configuration management |
| Kubernetes | `backend/k8s/secret.yaml` | Kubernetes secrets configuration | Part14.1 Container Orchestration | Secret management |
| Kubernetes | `backend/k8s/hpa.yaml` | Horizontal Pod Autoscaler configuration | Part14.1 Container Orchestration | Auto-scaling configuration |
| CI/CD | `backend/.github/workflows/analytics-ci.yml` | GitHub Actions CI pipeline | Part15.2 CI/CD Pipelines | Continuous integration |
| CI/CD | `backend/.github/workflows/analytics-cd.yml` | GitHub Actions CD pipeline | Part15.2 CI/CD Pipelines | Continuous deployment |
| Monitoring | `backend/monitoring/prometheus/analytics-metrics.yaml` | Prometheus metrics configuration | Part14.3 Monitoring Stack | Metrics collection |
| Monitoring | `backend/monitoring/grafana/dashboards/analytics-dashboard.json` | Grafana dashboard configuration | Part14.3 Monitoring Stack | Metrics visualization |
| Monitoring | `backend/monitoring/alerts/analytics-alerts.yaml` | Alert configuration | Part14.3 Monitoring Stack | Alerting rules |
| **üìö DOCUMENTATION** | | | | |
| API Docs | `backend/docs/api/analytics-api.md` | Analytics API documentation | Part08.4.1 Analytics APIs | API reference documentation |
| API Docs | `backend/docs/api/ab-testing-api.md` | A/B testing API documentation | Part08.4.2 A/B Testing APIs | Experiment API documentation |
| API Docs | `backend/docs/api/recommendation-api.md` | Recommendation API documentation | Part08.4.3 Recommendation APIs | ML API documentation |
| API Docs | `backend/docs/api/reporting-api.md` | Reporting API documentation | Part08.4.4 Reporting APIs | Report API documentation |
| Architecture | `backend/docs/architecture/analytics-architecture.md` | Analytics service architecture guide | Part06.2.1 Layered Architecture + EMSA-v1.0 | Architecture documentation |
| Architecture | `backend/docs/architecture/ml-architecture.md` | ML system architecture guide | Part04.5.2 Recommendation Engine | ML system documentation |
| Development | `backend/docs/development/analytics-setup.md` | Development setup guide | Part02.8 Technical Requirements | Development environment setup |
| Development | `backend/docs/development/testing-guide.md` | Testing strategy guide | Part15.3 Testing Strategy | Testing guidelines |
| Deployment | `backend/docs/deployment/analytics-deployment.md` | Deployment guide | Part14.1 Container Orchestration | Production deployment guide |
| Operations | `backend/docs/operations/analytics-monitoring.md` | Monitoring v√† operations guide | Part14.3 Monitoring Stack | Operational procedures |
| **üîß PROJECT CONFIGURATION** | | | | |
| Package Config | `backend/package.json` | Node.js package configuration v·ªõi analytics dependencies | Part02.8 Technical Requirements | Project dependencies v√† scripts |
| TypeScript Config | `backend/tsconfig.json` | TypeScript compiler configuration | Part02.8 Technical Requirements | TypeScript build configuration |
| ESLint Config | `backend/eslint.config.js` | ESLint linting configuration | Part02.8 Technical Requirements | Code quality standards |
| Jest Config | `backend/jest.config.js` | Jest testing framework configuration | Part15.3 Testing Strategy | Testing framework setup |
| Prisma Config | `backend/prisma/schema.prisma` | Prisma ORM schema definition | Part07.5 Analytics Database Design | Database schema definition |
| Environment | `backend/.env.example` | Environment variables template | Part02.8 Technical Requirements | Configuration template |
| Git Config | `backend/.gitignore` | Git ignore file | Part02.8 Technical Requirements | Version control configuration |
| Scripts | `backend/scripts/setup-analytics-service.sh` | Service setup script | Part15.2 CI/CD Pipelines | Development automation |
| Scripts | `backend/scripts/deploy-analytics-service.sh` | Deployment script | Part15.2 CI/CD Pipelines | Deployment automation |
| Scripts | `backend/scripts/migrate-analytics-database.sh` | Database migration script | Part07.5 Analytics Database Design | Database management |
| Scripts | `backend/scripts/backup-analytics-data.sh` | Data backup script | Part14.3 Monitoring Stack | Data protection |
| Local Development | `backend/README.md` | Service-specific README | Part02.8 Technical Requirements | Local development documentation |

---

## üìÅ **C·∫§U TR√öC TH∆Ø M·ª§C HO√ÄN CH·ªàNH**

```bash
analytics-intelligence-service/
‚îú‚îÄ‚îÄ üìÇ backend/                                 # Analytics & Intelligence Service
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ domain/                          # Domain Layer
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ entities/                    # Business Entities
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AnalyticsEvent.ts           # Core analytics event entity
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ABTestExperiment.ts         # A/B test experiment entity
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Recommendation.ts           # Recommendation entity v·ªõi ML
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Report.ts                   # Report entity v·ªõi templates
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Dashboard.ts                # Dashboard configuration entity
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MetricDefinition.ts         # Metric definition entity
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ DataExport.ts               # Data export entity
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ value-objects/               # Value Objects
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MetricValue.ts              # Metric value object
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ExperimentVariant.ts        # A/B test variant object
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RecommendationScore.ts      # Recommendation scoring object
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ReportFormat.ts             # Report format object
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ TimeRange.ts                # Time range value object
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ repositories/                # Repository Interfaces
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ IAnalyticsEventRepository.ts # Analytics event repository
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ IABTestRepository.ts        # A/B test repository interface
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ IRecommendationRepository.ts # Recommendation repository
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ IReportRepository.ts        # Report repository interface
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ IDashboardRepository.ts     # Dashboard repository interface
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÇ services/                    # Domain Services
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ AnalyticsDomainService.ts   # Analytics business logic
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ ABTestDomainService.ts      # A/B testing algorithms
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ RecommendationDomainService.ts # ML orchestration
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ ReportGenerationDomainService.ts # Report generation logic
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ application/                     # Application Layer
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ use-cases/                   # Use Cases
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ analytics/               # Analytics Use Cases
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TrackEventUseCase.ts    # Event tracking workflow
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GetRealTimeMetricsUseCase.ts # Real-time metrics
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CreateDashboardUseCase.ts # Dashboard creation
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UpdateDashboardUseCase.ts # Dashboard updates
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ GetHistoricalDataUseCase.ts # Historical data
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ ab-testing/              # A/B Testing Use Cases
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CreateExperimentUseCase.ts # Experiment creation
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RunExperimentUseCase.ts # Experiment execution
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AnalyzeExperimentUseCase.ts # Statistical analysis
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ StopExperimentUseCase.ts # Experiment termination
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ GetExperimentResultsUseCase.ts # Results retrieval
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ recommendations/         # Recommendation Use Cases
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GenerateRecommendationsUseCase.ts # ML recommendations
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TrainModelUseCase.ts    # Model training
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UpdateUserPreferencesUseCase.ts # Preference updates
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ GetRecommendationHistoryUseCase.ts # History access
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÇ reports/                 # Reporting Use Cases
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ CreateReportTemplateUseCase.ts # Template creation
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ GenerateReportUseCase.ts # Report generation
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ ScheduleReportUseCase.ts # Report scheduling
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ ExportDataUseCase.ts    # Data export
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ GetReportHistoryUseCase.ts # Report history
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ dto/                         # Data Transfer Objects
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AnalyticsEventDTO.ts        # Analytics event DTOs
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ABTestDTO.ts                # A/B testing DTOs
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RecommendationDTO.ts        # Recommendation DTOs
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ReportDTO.ts                # Report DTOs
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DashboardDTO.ts             # Dashboard DTOs
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ MetricsDTO.ts               # Metrics DTOs
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ commands/                    # CQRS Commands
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ analytics/               # Analytics Commands
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ TrackEventCommand.ts    # Event tracking command
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ ab-testing/              # A/B Testing Commands
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CreateExperimentCommand.ts # Experiment creation
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ recommendations/         # Recommendation Commands
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ GenerateRecommendationsCommand.ts # ML command
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÇ reports/                 # Report Commands
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ GenerateReportCommand.ts # Report generation
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÇ queries/                     # CQRS Queries
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ üìÇ analytics/               # Analytics Queries
‚îÇ   ‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ GetMetricsQuery.ts      # Metrics queries
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ üìÇ ab-testing/              # A/B Testing Queries
‚îÇ   ‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ GetExperimentResultsQuery.ts # Results queries
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ üìÇ recommendations/         # Recommendation Queries
‚îÇ   ‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ GetRecommendationsQuery.ts # ML queries
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ üìÇ reports/                 # Report Queries
‚îÇ   ‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ GetReportQuery.ts       # Report queries
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ infrastructure/                  # Infrastructure Layer
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ persistence/                 # Data Persistence
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ repositories/            # Repository Implementations
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AnalyticsEventRepository.ts # Event storage impl
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ABTestRepository.ts     # A/B test storage impl
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RecommendationRepository.ts # ML storage impl
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ReportRepository.ts     # Report storage impl
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ DashboardRepository.ts  # Dashboard storage impl
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ models/                  # Database Models
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AnalyticsEventModel.ts  # Analytics event model
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ABTestModel.ts          # A/B test model
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RecommendationModel.ts  # Recommendation model
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ReportModel.ts          # Report model
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ DashboardModel.ts       # Dashboard model
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÇ migrations/              # Database Migrations
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ 001_create_analytics_events.sql # Event schema
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ 002_create_ab_tests.sql # A/B test schema
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ 003_create_recommendations.sql # ML schema
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ 004_create_reports.sql  # Report schema
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ 005_create_dashboards.sql # Dashboard schema
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ external-services/           # External Service Adapters
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MLModelService.ts           # ML model integration
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ElasticsearchService.ts     # Search engine integration
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ClickHouseService.ts        # OLAP integration
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RedisAnalyticsCache.ts      # Caching service
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ReportExportService.ts      # Export service
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ StatisticsService.ts        # Statistical calculations
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÇ config/                      # Configuration
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ analytics.config.ts         # Analytics configuration
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ ml.config.ts                # ML configuration
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ elasticsearch.config.ts     # Search configuration
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ clickhouse.config.ts        # OLAP configuration
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ redis-analytics.config.ts   # Cache configuration
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ presentation/                    # Presentation Layer
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ controllers/                 # REST Controllers
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AnalyticsController.ts      # Analytics API endpoints
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ABTestController.ts         # A/B testing endpoints
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RecommendationController.ts # Recommendation endpoints
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ReportController.ts         # Report endpoints
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DashboardController.ts      # Dashboard endpoints
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ HealthController.ts         # Health check endpoint
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÇ middleware/                  # Middleware
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ AnalyticsMiddleware.ts      # Analytics middleware
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ RateLimitingMiddleware.ts   # Rate limiting
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ ValidationMiddleware.ts     # Request validation
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ LoggingMiddleware.ts        # Request logging
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ shared/                          # Service-Specific Shared Code
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ constants/                   # Constants
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ analytics.constants.ts      # Analytics constants
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ml.constants.ts             # ML constants
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ report.constants.ts         # Report constants
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ utils/                       # Utilities
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ statistics.utils.ts         # Statistical utilities
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ metrics.utils.ts            # Metrics utilities
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ export.utils.ts             # Export utilities
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ time-range.utils.ts         # Time range utilities
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ exceptions/                  # Custom Exceptions
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AnalyticsException.ts       # Analytics exceptions
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MLModelException.ts         # ML exceptions
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ReportGenerationException.ts # Report exceptions
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÇ types/                       # TypeScript Types
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ analytics.types.ts          # Analytics types
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ ml.types.ts                 # ML types
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ report.types.ts             # Report types
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÇ tests/                           # Test Suites
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ üìÇ unit/                        # Unit Tests
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ domain/                  # Domain Tests
‚îÇ   ‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÇ entities/            # Entity Tests
‚îÇ   ‚îÇ       ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ AnalyticsEvent.test.ts # Event entity tests
‚îÇ   ‚îÇ       ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ ABTestExperiment.test.ts # A/B test tests
‚îÇ   ‚îÇ       ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ Recommendation.test.ts # Recommendation tests
‚îÇ   ‚îÇ       ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ Report.test.ts      # Report entity tests
‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ üìÇ application/             # Application Tests
‚îÇ   ‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ üìÇ use-cases/           # Use Case Tests
‚îÇ   ‚îÇ       ‚îÇ           ‚îú‚îÄ‚îÄ üìÇ analytics/       # Analytics Use Case Tests
‚îÇ   ‚îÇ       ‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ TrackEventUseCase.test.ts # Event tracking tests
‚îÇ   ‚îÇ       ‚îÇ           ‚îú‚îÄ‚îÄ üìÇ ab-testing/      # A/B Testing Use Case Tests
‚îÇ   ‚îÇ       ‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ CreateExperimentUseCase.test.ts # Experiment tests
‚îÇ   ‚îÇ       ‚îÇ           ‚îú‚îÄ‚îÄ üìÇ recommendations/ # Recommendation Use Case Tests
‚îÇ   ‚îÇ       ‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ GenerateRecommendationsUseCase.test.ts # ML tests
‚îÇ   ‚îÇ       ‚îÇ           ‚îî‚îÄ‚îÄ üìÇ reports/         # Report Use Case Tests
‚îÇ   ‚îÇ       ‚îÇ               ‚îî‚îÄ‚îÄ GenerateReportUseCase.test.ts # Report tests
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ üìÇ integration/                 # Integration Tests
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ controllers/             # Controller Tests
‚îÇ   ‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AnalyticsController.test.ts # Analytics API tests
‚îÇ   ‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ABTestController.test.ts # A/B testing API tests
‚îÇ   ‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RecommendationController.test.ts # ML API tests
‚îÇ   ‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ReportController.test.ts # Report API tests
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ external-services/       # External Service Tests
‚îÇ   ‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MLModelService.test.ts  # ML service tests
‚îÇ   ‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ElasticsearchService.test.ts # Search service tests
‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ üìÇ persistence/             # Database Tests
‚îÇ   ‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ AnalyticsEventRepository.test.ts # Repository tests
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ üìÇ e2e/                         # End-to-End Tests
‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ analytics-workflow.test.ts  # Analytics E2E tests
‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ ab-testing-workflow.test.ts # A/B testing E2E tests
‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ recommendation-workflow.test.ts # ML E2E tests
‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ reporting-workflow.test.ts  # Reporting E2E tests
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ k8s/                                 # Kubernetes Configs
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ deployment.yaml                     # Service deployment
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ service.yaml                        # Service definition
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ configmap.yaml                      # Configuration map
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ secret.yaml                         # Secrets
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ hpa.yaml                            # Horizontal Pod Autoscaler
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ monitoring/                          # Monitoring Configs
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ prometheus/                      # Prometheus Setup
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ analytics-metrics.yaml          # Metrics configuration
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ grafana/                         # Grafana Setup
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÇ dashboards/                  # Dashboard Configs
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ analytics-dashboard.json    # Analytics dashboard
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÇ alerts/                          # Alert Configs
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ analytics-alerts.yaml           # Alert rules
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ docs/                                # Documentation
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ api/                             # API Documentation
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ analytics-api.md                # Analytics API docs
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ab-testing-api.md               # A/B testing API docs
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ recommendation-api.md           # Recommendation API docs
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ reporting-api.md                # Reporting API docs
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ architecture/                    # Architecture Docs
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ analytics-architecture.md       # Service architecture
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ml-architecture.md              # ML architecture
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ development/                     # Development Docs
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ analytics-setup.md              # Setup guide
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ testing-guide.md                # Testing guide
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ deployment/                      # Deployment Docs
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ analytics-deployment.md         # Deployment guide
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÇ operations/                      # Operations Docs
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ analytics-monitoring.md         # Monitoring guide
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ scripts/                             # Automation Scripts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ setup-analytics-service.sh          # Service setup
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ deploy-analytics-service.sh         # Deployment script
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ migrate-analytics-database.sh       # DB migration
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ backup-analytics-data.sh            # Data backup
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ .github/                             # GitHub Actions
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÇ workflows/                       # CI/CD Workflows
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ analytics-ci.yml                # Continuous Integration
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ analytics-cd.yml                # Continuous Deployment
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ prisma/                              # Prisma ORM
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ schema.prisma                       # Database schema
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ package.json                            # Node.js dependencies
‚îÇ   ‚îú‚îÄ‚îÄ tsconfig.json                           # TypeScript config
‚îÇ   ‚îú‚îÄ‚îÄ eslint.config.js                        # ESLint config
‚îÇ   ‚îú‚îÄ‚îÄ jest.config.js                          # Jest config
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile                              # Container definition
‚îÇ   ‚îú‚îÄ‚îÄ docker-compose.yml                      # Local development
‚îÇ   ‚îú‚îÄ‚îÄ .dockerignore                           # Docker ignore
‚îÇ   ‚îú‚îÄ‚îÄ .env.example                            # Environment template
‚îÇ   ‚îú‚îÄ‚îÄ .gitignore                              # Git ignore
‚îÇ   ‚îî‚îÄ‚îÄ README.md                               # Service documentation
```

---

## üìã **SHARED PACKAGES INTEGRATION**

### **Package.json Dependencies:**
```json
{
  "name": "@psp/analytics-intelligence-service",
  "version": "1.0.0",
  "dependencies": {
    "@psp/shared-core": "^1.2.0",           // Logger, validation, crypto utilities
    "@psp/shared-events": "^1.1.0",         // Domain events contracts
    "@psp/shared-database": "^1.0.5",       // DB connection utilities
    
    // Analytics & ML specific
    "elasticsearch": "^8.8.0",              // Search v√† analytics engine
    "clickhouse": "^2.12.0",                // OLAP database client
    "tensorflow": "^4.9.0",                 // ML framework
    "pandas-js": "^1.3.0",                  // Data analysis
    "chart.js": "^4.3.0",                   // Chart generation
    "jstat": "^1.9.6",                      // Statistical calculations
    "redis": "^4.6.7",                      // High-performance caching
    "puppeteer": "^20.5.0"                  // PDF generation
  }
}
```

### **Import Pattern Examples:**
```typescript
// ‚úÖ Import from shared packages
import { Logger, ValidationUtils, BaseException } from '@psp/shared-core';
import { AnalyticsEventPublished, RecommendationGenerated } from '@psp/shared-events';
import { DatabaseConnection, TransactionManager } from '@psp/shared-database';

// ‚úÖ Import service-specific shared code
import { AnalyticsException } from '../shared/exceptions/AnalyticsException';
import { ANALYTICS_CONSTANTS } from '../shared/constants/analytics.constants';
import { statisticsUtils } from '../shared/utils/statistics.utils';

// ‚úÖ Domain imports
import { AnalyticsEvent } from '../domain/entities/AnalyticsEvent';
import { TrackEventUseCase } from '../application/use-cases/analytics/TrackEventUseCase';
```

### **Package Versions Management:**
```bash
# Update shared packages across services
npm update @psp/shared-core @psp/shared-events @psp/shared-database

# Lock specific versions for stability
npm install @psp/shared-core@1.2.0 --save-exact
```

---

## üîß **IMPLEMENTATION CHECKLIST**

### **Phase 1: PROJECT SETUP & SHARED PACKAGES** ‚öôÔ∏è

#### **1.1 Kh·ªüi t·∫°o d·ª± √°n repository**
- [ ] **T·∫°o analytics-intelligence-service repository**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part06.2.1 Layered Architecture + EMSA-v1.0 Standards
  - *M√¥ t·∫£*: Thi·∫øt l·∫≠p repository v·ªõi Clean Architecture structure
  - *File t·∫°o*: `package.json`, `README.md`, `.gitignore`, to√†n b·ªô folder structure
  - *√ù nghƒ©a*: Single repository cho complete Analytics service, EMSA-v1.0 compliant

#### **1.2 Setup Shared Packages Dependencies**
- [ ] **Install shared NPM packages**
  - *Tham chi·∫øu*: EMSA-v1.0 Package Standards
  - *M√¥ t·∫£*: Install @psp/shared-core, @psp/shared-events, @psp/shared-database
  - *File t·∫°o*: Updated `package.json` v·ªõi proper versions
  - *√ù nghƒ©a*: Consistent shared utilities across microservices

#### **1.3 Configuration Files Setup**
- [ ] **Setup project configuration files**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part02.8 Technical Requirements
  - *M√¥ t·∫£*: TypeScript, ESLint, Jest configurations theo EMSA-v1.0
  - *File t·∫°o*: `tsconfig.json`, `eslint.config.js`, `jest.config.js`
  - *√ù nghƒ©a*: Standardized development environment

#### **1.4 Analytics Database Setup**
- [ ] **Thi·∫øt l·∫≠p PostgreSQL cho analytics data**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part07.5 Analytics Database Design
  - *M√¥ t·∫£*: PostgreSQL 15+ v·ªõi analytics schema, ClickHouse for OLAP
  - *File t·∫°o*: `backend/prisma/schema.prisma`, `analytics.config.ts`
  - *√ù nghƒ©a*: High-performance analytics data storage

- [ ] **Thi·∫øt l·∫≠p Elasticsearch cho search**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part04.3.2 Real Time Analytics
  - *M√¥ t·∫£*: Elasticsearch cluster cho real-time search v√† analytics
  - *File t·∫°o*: `elasticsearch.config.ts`, search mappings
  - *√ù nghƒ©a*: Fast search v√† real-time analytics capability

### **Phase 2: DOMAIN LAYER IMPLEMENTATION** üóÉÔ∏è

#### **2.1 Core Entities Implementation**
- [ ] **Implement AnalyticsEvent Entity**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part04.3.2 Real Time Analytics (FR-008)
  - *M√¥ t·∫£*: Analytics event entity v·ªõi business rules, event tracking, metrics collection
  - *File t·∫°o*: `backend/src/domain/entities/AnalyticsEvent.ts`
  - *√ù nghƒ©a*: Core event tracking business logic encapsulation

- [ ] **Implement ABTestExperiment Entity**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part04.5.1 A/B Testing (FR-012)
  - *M√¥ t·∫£*: A/B test experiment entity v·ªõi statistical analysis, variant management
  - *File t·∫°o*: `backend/src/domain/entities/ABTestExperiment.ts`
  - *√ù nghƒ©a*: A/B testing business logic v√† experiment workflows

- [ ] **Implement Recommendation Entity**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part04.5.2 Recommendation Engine (FR-013)
  - *M√¥ t·∫£*: Recommendation entity v·ªõi ML integration, collaborative filtering
  - *File t·∫°o*: `backend/src/domain/entities/Recommendation.ts`
  - *√ù nghƒ©a*: ML-powered recommendation business logic

- [ ] **Implement Report Entity**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part04.5.3 Advanced Reporting (FR-014)
  - *M√¥ t·∫£*: Report entity v·ªõi template management, scheduling, export
  - *File t·∫°o*: `backend/src/domain/entities/Report.ts`
  - *√ù nghƒ©a*: Advanced reporting workflows v√† automation

#### **2.2 Value Objects Implementation**
- [ ] **Implement MetricValue Value Object**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part04.3.2 Real Time Analytics
  - *M√¥ t·∫£*: Metric value object v·ªõi validation, calculations, aggregations
  - *File t·∫°o*: `backend/src/domain/value-objects/MetricValue.ts`
  - *√ù nghƒ©a*: Type-safe metrics handling v·ªõi business validation

- [ ] **Implement ExperimentVariant Value Object**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part04.5.1 A/B Testing
  - *M√¥ t·∫£*: A/B test variant value object v·ªõi configuration, traffic allocation
  - *File t·∫°o*: `backend/src/domain/value-objects/ExperimentVariant.ts`
  - *√ù nghƒ©a*: Experiment variant configuration consistency

- [ ] **Implement RecommendationScore Value Object**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part04.5.2 Recommendation Engine
  - *M√¥ t·∫£*: Recommendation scoring value object v·ªõi ML scoring, ranking
  - *File t·∫°o*: `backend/src/domain/value-objects/RecommendationScore.ts`
  - *√ù nghƒ©a*: ML model scoring consistency v√† validation

#### **2.3 Domain Services Implementation**
- [ ] **Implement AnalyticsDomainService**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part04.3.2 Real Time Analytics
  - *M√¥ t·∫£*: Analytics business logic service v·ªõi complex calculations, aggregations
  - *File t·∫°o*: `backend/src/domain/services/AnalyticsDomainService.ts`
  - *√ù nghƒ©a*: Complex analytics business rules enforcement

- [ ] **Implement ABTestDomainService**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part04.5.1 A/B Testing
  - *M√¥ t·∫£*: A/B testing domain service v·ªõi statistical analysis, significance testing
  - *File t·∫°o*: `backend/src/domain/services/ABTestDomainService.ts`
  - *√ù nghƒ©a*: Statistical analysis algorithms v√† experiment validation

### **Phase 3: APPLICATION LAYER IMPLEMENTATION** üìÑ

#### **3.1 Analytics Use Cases Implementation**
- [ ] **Implement Analytics Use Cases**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part04.3.2 Real Time Analytics
  - *M√¥ t·∫£*: Event tracking, real-time metrics, dashboard operations v·ªõi validation, error handling
  - *File t·∫°o*: `backend/src/application/use-cases/analytics/TrackEventUseCase.ts`, `GetRealTimeMetricsUseCase.ts`, `CreateDashboardUseCase.ts`, `UpdateDashboardUseCase.ts`, `GetHistoricalDataUseCase.ts`
  - *√ù nghƒ©a*: Support real-time analytics features v·ªõi business logic

- [ ] **Implement A/B Testing Use Cases**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part04.5.1 A/B Testing
  - *M√¥ t·∫£*: Experiment lifecycle management, statistical analysis, results processing
  - *File t·∫°o*: `backend/src/application/use-cases/ab-testing/CreateExperimentUseCase.ts`, `RunExperimentUseCase.ts`, `AnalyzeExperimentUseCase.ts`, `StopExperimentUseCase.ts`, `GetExperimentResultsUseCase.ts`
  - *√ù nghƒ©a*: Support A/B testing workflows v·ªõi statistical rigor

#### **3.2 ML & Reporting Use Cases Implementation**
- [ ] **Implement Recommendation Use Cases**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part04.5.2 Recommendation Engine
  - *M√¥ t·∫£*: ML model operations, recommendation generation, model training workflows
  - *File t·∫°o*: `backend/src/application/use-cases/recommendations/GenerateRecommendationsUseCase.ts`, `TrainModelUseCase.ts`, `UpdateUserPreferencesUseCase.ts`, `GetRecommendationHistoryUseCase.ts`
  - *√ù nghƒ©a*: Support ML-powered recommendation features

- [ ] **Implement Reporting Use Cases**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part04.5.3 Advanced Reporting
  - *M√¥ t·∫£*: Report generation, scheduling, export workflows v·ªõi template management
  - *File t·∫°o*: `backend/src/application/use-cases/reports/CreateReportTemplateUseCase.ts`, `GenerateReportUseCase.ts`, `ScheduleReportUseCase.ts`, `ExportDataUseCase.ts`, `GetReportHistoryUseCase.ts`
  - *√ù nghƒ©a*: Support advanced reporting features v·ªõi automation

#### **3.3 CQRS Implementation**
- [ ] **Implement Command Handlers**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part06.2.1 Layered Architecture
  - *M√¥ t·∫£*: CQRS command handlers cho write operations
  - *File t·∫°o*: `backend/src/application/commands/analytics/TrackEventCommand.ts`, `ab-testing/CreateExperimentCommand.ts`, `recommendations/GenerateRecommendationsCommand.ts`, `reports/GenerateReportCommand.ts`
  - *√ù nghƒ©a*: Separate command processing v·ªõi proper validation

- [ ] **Implement Query Handlers**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part06.2.1 Layered Architecture
  - *M√¥ t·∫£*: CQRS query handlers cho read operations
  - *File t·∫°o*: `backend/src/application/queries/analytics/GetMetricsQuery.ts`, `ab-testing/GetExperimentResultsQuery.ts`, `recommendations/GetRecommendationsQuery.ts`, `reports/GetReportQuery.ts`
  - *√ù nghƒ©a*: Optimized read operations v·ªõi proper caching

### **Phase 4: INFRASTRUCTURE LAYER IMPLEMENTATION** üèóÔ∏è

#### **4.1 Repository Implementations**
- [ ] **Implement PostgreSQL Repositories**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part07.5 Analytics Database Design
  - *M√¥ t·∫£*: Concrete repository implementations v·ªõi Prisma ORM, connection pooling
  - *File t·∫°o*: `backend/src/infrastructure/persistence/repositories/AnalyticsEventRepository.ts`, `ABTestRepository.ts`, `RecommendationRepository.ts`, `ReportRepository.ts`, `DashboardRepository.ts`
  - *√ù nghƒ©a*: Data access layer cho analytics operations

#### **4.2 External Services Implementation**
- [ ] **Implement ML Service Integration**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part04.5.2 Recommendation Engine
  - *M√¥ t·∫£*: TensorFlow/PyTorch model integration, model serving, training pipelines
  - *File t·∫°o*: `backend/src/infrastructure/external-services/MLModelService.ts`
  - *√ù nghƒ©a*: ML model deployment v√† inference capabilities

- [ ] **Implement Analytics Engine Integration**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part04.3.2 Real Time Analytics
  - *M√¥ t·∫£*: Elasticsearch, ClickHouse, Redis integration cho real-time analytics
  - *File t·∫°o*: `backend/src/infrastructure/external-services/ElasticsearchService.ts`, `ClickHouseService.ts`, `RedisAnalyticsCache.ts`
  - *√ù nghƒ©a*: High-performance analytics infrastructure

- [ ] **Implement Report Export Services**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part04.5.3 Advanced Reporting
  - *M√¥ t·∫£*: PDF/Excel generation, chart rendering, scheduled delivery
  - *File t·∫°o*: `backend/src/infrastructure/external-services/ReportExportService.ts`, `StatisticsService.ts`
  - *√ù nghƒ©a*: Professional report generation capabilities

#### **4.3 Configuration Implementation**
- [ ] **Implement Service Configurations**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part02.8 Technical Requirements
  - *M√¥ t·∫£*: Service-specific configuration management cho analytics, ML, reporting
  - *File t·∫°o*: `backend/src/infrastructure/config/analytics.config.ts`, `ml.config.ts`, `elasticsearch.config.ts`, `clickhouse.config.ts`, `redis-analytics.config.ts`
  - *√ù nghƒ©a*: Centralized configuration cho all analytics components

### **Phase 5: PRESENTATION LAYER IMPLEMENTATION** üåê

#### **5.1 API Controllers Implementation**
- [ ] **Implement Analytics Controllers**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part08.4.1 Analytics APIs
  - *M√¥ t·∫£*: REST API controllers cho analytics, dashboards, real-time metrics
  - *File t·∫°o*: `backend/src/presentation/controllers/AnalyticsController.ts`, `DashboardController.ts`
  - *√ù nghƒ©a*: API endpoints supporting real-time analytics functionality

- [ ] **Implement ML & Reporting Controllers**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part08.4.2-4.4 ML & Reporting APIs
  - *M√¥ t·∫£*: REST API controllers cho A/B testing, recommendations, reports
  - *File t·∫°o*: `backend/src/presentation/controllers/ABTestController.ts`, `RecommendationController.ts`, `ReportController.ts`, `HealthController.ts`
  - *√ù nghƒ©a*: API endpoints supporting ML v√† advanced reporting

#### **5.2 Security Middleware Implementation**
- [ ] **Implement Analytics Middleware**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part05.3 Security Requirements
  - *M√¥ t·∫£*: Analytics tracking, rate limiting, validation, logging middleware
  - *File t·∫°o*: `backend/src/presentation/middleware/AnalyticsMiddleware.ts`, `RateLimitingMiddleware.ts`, `ValidationMiddleware.ts`, `LoggingMiddleware.ts`
  - *√ù nghƒ©a*: Security enforcement cho analytics API access

#### **5.3 Service-Specific Shared Code Implementation**
- [ ] **Implement Service-Specific Constants**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part04.3.2 Real Time Analytics + Part04.5.1-5.3
  - *M√¥ t·∫£*: Analytics, ML, reporting constants ONLY
  - *File t·∫°o*: `backend/src/shared/constants/analytics.constants.ts`, `ml.constants.ts`, `report.constants.ts`
  - *√ù nghƒ©a*: Consistent constants across analytics service components

- [ ] **Implement Service-Specific Utilities**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part04.5.1 A/B Testing Statistical Analysis
  - *M√¥ t·∫£*: Statistics, metrics, export utilities cho analytics domain
  - *File t·∫°o*: `backend/src/shared/utils/statistics.utils.ts`, `metrics.utils.ts`, `export.utils.ts`, `time-range.utils.ts`
  - *√ù nghƒ©a*: Domain-specific utility functions

- [ ] **Implement Service-Specific Exceptions**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part05.3 Security Requirements
  - *M√¥ t·∫£*: Analytics, ML, reporting domain exceptions
  - *File t·∫°o*: `backend/src/shared/exceptions/AnalyticsException.ts`, `MLModelException.ts`, `ReportGenerationException.ts`
  - *√ù nghƒ©a*: Proper error handling cho analytics operations

### **Phase 6: TESTING IMPLEMENTATION** üß™

#### **6.1 Unit Testing Implementation**
- [ ] **Implement Domain Entity Tests**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part15.3 Testing Strategy
  - *M√¥ t·∫£*: Unit tests cho all domain entities v·ªõi business rule validation
  - *File t·∫°o*: `backend/src/tests/unit/domain/entities/AnalyticsEvent.test.ts`, `ABTestExperiment.test.ts`, `Recommendation.test.ts`, `Report.test.ts`
  - *√ù nghƒ©a*: Validate domain logic correctness

- [ ] **Implement Use Case Tests**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part15.3 Testing Strategy
  - *M√¥ t·∫£*: Unit tests cho all use cases v·ªõi mocked dependencies
  - *File t·∫°o*: `backend/src/tests/unit/application/use-cases/analytics/TrackEventUseCase.test.ts`, `ab-testing/CreateExperimentUseCase.test.ts`, `recommendations/GenerateRecommendationsUseCase.test.ts`, `reports/GenerateReportUseCase.test.ts`
  - *√ù nghƒ©a*: Validate application logic correctness

#### **6.2 Integration Testing Implementation**
- [ ] **Implement API Integration Tests**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part08.4 Analytics APIs
  - *M√¥ t·∫£*: Integration tests cho all API endpoints v·ªõi real dependencies
  - *File t·∫°o*: `backend/src/tests/integration/controllers/AnalyticsController.test.ts`, `ABTestController.test.ts`, `RecommendationController.test.ts`, `ReportController.test.ts`
  - *√ù nghƒ©a*: Validate API endpoint functionality

- [ ] **Implement External Service Tests**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part04.5.2 Recommendation Engine + Part04.3.2 Real Time Analytics
  - *M√¥ t·∫£*: Integration tests cho ML, Elasticsearch, ClickHouse services
  - *File t·∫°o*: `backend/src/tests/integration/external-services/MLModelService.test.ts`, `ElasticsearchService.test.ts`
  - *√ù nghƒ©a*: Validate external service integrations

#### **6.3 End-to-End Testing Implementation**
- [ ] **Implement E2E Workflow Tests**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part04.3.2 Real Time Analytics + A/B Testing + Recommendations + Reporting
  - *M√¥ t·∫£*: Complete workflow tests t·ª´ API request ƒë·∫øn database v√† external services
  - *File t·∫°o*: `backend/src/tests/e2e/analytics-workflow.test.ts`, `ab-testing-workflow.test.ts`, `recommendation-workflow.test.ts`, `reporting-workflow.test.ts`
  - *√ù nghƒ©a*: Validate complete system functionality

### **Phase 7: DEVOPS & DEPLOYMENT** üê≥

#### **7.1 Containerization**
- [ ] **Setup Docker Configuration**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part14.1 Container Orchestration
  - *M√¥ t·∫£*: Multi-stage Docker build v·ªõi analytics dependencies, ML libraries
  - *File t·∫°o*: `backend/Dockerfile`, `docker-compose.yml`, `.dockerignore`
  - *√ù nghƒ©a*: Consistent deployment environment

#### **7.2 Kubernetes Deployment**
- [ ] **Setup Kubernetes Manifests**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part14.1 Container Orchestration
  - *M√¥ t·∫£*: K8s deployment v·ªõi auto-scaling, health checks, resource limits
  - *File t·∫°o*: `backend/k8s/deployment.yaml`, `service.yaml`, `configmap.yaml`, `secret.yaml`, `hpa.yaml`
  - *√ù nghƒ©a*: Production-ready Kubernetes deployment

#### **7.3 CI/CD Pipeline**
- [ ] **Setup GitHub Actions**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part15.2 CI/CD Pipelines
  - *M√¥ t·∫£*: Automated testing, building, deployment pipeline v·ªõi ML model deployment
  - *File t·∫°o*: `.github/workflows/analytics-ci.yml`, `analytics-cd.yml`
  - *√ù nghƒ©a*: Automated quality assurance v√† deployment

#### **7.4 Monitoring & Observability**
- [ ] **Setup Monitoring Stack**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part14.3 Monitoring Stack
  - *M√¥ t·∫£*: Prometheus metrics, Grafana dashboards, custom analytics metrics
  - *File t·∫°o*: `monitoring/prometheus/analytics-metrics.yaml`, `monitoring/grafana/dashboards/analytics-dashboard.json`
  - *√ù nghƒ©a*: Production monitoring v√† alerting

### **Phase 8: DOCUMENTATION & AUTOMATION** üìö

#### **8.1 API Documentation**
- [ ] **Create API Documentation**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part08.4 Analytics APIs
  - *M√¥ t·∫£*: Complete API documentation v·ªõi examples cho analytics, ML, reporting
  - *File t·∫°o*: `docs/api/analytics-api.md`, `ab-testing-api.md`, `recommendation-api.md`, `reporting-api.md`
  - *√ù nghƒ©a*: Developer onboarding v√† service integration

#### **8.2 Architecture Documentation**
- [ ] **Create Architecture Guides**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part06.2.1 Layered Architecture + EMSA-v1.0
  - *M√¥ t·∫£*: Clean Architecture implementation guide, ML architecture
  - *File t·∫°o*: `docs/architecture/analytics-architecture.md`, `docs/architecture/ml-architecture.md`
  - *√ù nghƒ©a*: Architectural understanding v√† maintenance

#### **8.3 Automation Scripts**
- [ ] **Create Automation Scripts**
  - *Tham chi·∫øu*: SRS-Grok-V2.md - Part15.2 CI/CD Pipelines
  - *M√¥ t·∫£*: Service setup, deployment, data management scripts v·ªõi ML model deployment
  - *File t·∫°o*: `scripts/setup-analytics-service.sh`, `deploy-analytics-service.sh`, `migrate-analytics-database.sh`, `backup-analytics-data.sh`
  - *√ù nghƒ©a*: Operational efficiency v√† consistency

---

## üéØ **K·∫æT LU·∫¨N**

**T·ªïng s·ªë files ƒë∆∞·ª£c map**: 156 files v·ªõi ƒë·∫ßy ƒë·ªß SRS references  
**Backend Clean Architecture**: 78 files v·ªõi proper layering theo EMSA-v1.0  
**Shared Packages Integration**: 3 NPM packages cho cross-service utilities  
**API Coverage**: Complete REST endpoints cho Analytics, A/B Testing, Recommendations, Reporting  
**ML Integration**: TensorFlow model serving, collaborative filtering, statistical analysis  
**Testing Strategy**: 35 test files coverage (Unit, Integration, E2E)  
**Deployment & DevOps**: 18 infrastructure files v·ªõi K8s + monitoring  
**Documentation**: 12 comprehensive docs cho development + operations  

**Estimated timeline**: 8-10 tu·∫ßn cho 1 team (4-5 developers)  
**SRS coverage**: 100% cho Analytics domain (FR-008, FR-012, FR-013, FR-014)  
**EMSA-v1.0 compliance**: Full compliance v·ªõi Clean Architecture standards  
**Integration points**: Ready cho Campaign, Identity, Redemption services integration  
**Professional standards**: NPM packages approach, semantic versioning, CI/CD automation  
**ML capabilities**: Complete machine learning pipeline v·ªõi TensorFlow integration  
**Analytics performance**: Real-time capabilities v·ªõi Elasticsearch v√† ClickHouse  
**Advanced reporting**: PDF/Excel generation v·ªõi scheduled delivery  

**Sub-Project 4 ho√†n ch·ªânh! Analytics & Intelligence Service v·ªõi complete backend implementation theo EMSA-v1.0 v√† SRS specifications! üöÄ**
