# üöÄ Sub-Project 4: Analytics & Intelligence Service - Complete Implementation Guide

## üìã **B·∫¢NG T·ªîNG H·ª¢P T·∫§T C·∫¢ FILES V√Ä REFERENCES**

| **Category** | **File Path** | **M√¥ t·∫£** | **SRS Reference** | **Business Purpose** |
|-------------|---------------|-----------|-------------------|-------------------|
| **üèóÔ∏è BACKEND DOMAIN** | | | | |
| Entities | `backend/src/domain/entities/AnalyticsEvent.ts` | Core analytics event entity v·ªõi business rules | Part04.3.2 Real Time Analytics (FR-008) | Encapsulate event tracking logic |
| Entities | `backend/src/domain/entities/Experiment.ts` | A/B testing experiment entity | Part04.5.1 A/B Testing (FR-012) | Manage experiment lifecycle |
| Entities | `backend/src/domain/entities/ExperimentVariant.ts` | Experiment variant entity | Part04.5.1 A/B Testing (FR-012) | Handle variant configurations |
| Entities | `backend/src/domain/entities/Recommendation.ts` | ML recommendation entity | Part04.5.2 Recommendation Engine (FR-013) | Encapsulate recommendation logic |
| Entities | `backend/src/domain/entities/Report.ts` | Custom report entity | Part04.5.3 Advanced Reporting (FR-014) | Manage report generation |
| Entities | `backend/src/domain/entities/Dashboard.ts` | Analytics dashboard entity | Part04.3.2 Real Time Analytics (FR-008) | Configure dashboard layouts |
| Entities | `backend/src/domain/entities/Metric.ts` | Performance metric entity | Part04.3.2 Real Time Analytics (FR-008) | Define metric calculations |
| Entities | `backend/src/domain/entities/Cohort.ts` | User cohort analysis entity | Part04.3.2 Real Time Analytics (FR-008) | Group user behaviors |
| Value Objects | `backend/src/domain/value-objects/MetricValue.ts` | Metric value v·ªõi validation | Part04.3.2 Real Time Analytics | Standardized metric values |
| Value Objects | `backend/src/domain/value-objects/TimeRange.ts` | Time period value object | Part04.3.2 Real Time Analytics | Consistent time handling |
| Value Objects | `backend/src/domain/value-objects/ConfidenceLevel.ts` | Statistical confidence level | Part04.5.1 A/B Testing | A/B test statistical validation |
| Value Objects | `backend/src/domain/value-objects/RecommendationScore.ts` | ML recommendation score | Part04.5.2 Recommendation Engine | Score validation (0-100) |
| Repositories | `backend/src/domain/repositories/IAnalyticsEventRepository.ts` | Analytics event repository interface | Part06.2.1 Layered Architecture | Event storage contract |
| Repositories | `backend/src/domain/repositories/IExperimentRepository.ts` | Experiment repository interface | Part06.2.1 Layered Architecture | A/B test data contract |
| Repositories | `backend/src/domain/repositories/IRecommendationRepository.ts` | Recommendation repository interface | Part06.2.1 Layered Architecture | ML data storage contract |
| Repositories | `backend/src/domain/repositories/IReportRepository.ts` | Report repository interface | Part06.2.1 Layered Architecture | Report storage contract |
| Repositories | `backend/src/domain/repositories/IDashboardRepository.ts` | Dashboard repository interface | Part06.2.1 Layered Architecture | Dashboard config contract |
| Domain Services | `backend/src/domain/services/StatisticalAnalysisDomainService.ts` | Statistical calculation business logic | Part04.5.1 A/B Testing (FR-012) | A/B test confidence calculations |
| Domain Services | `backend/src/domain/services/RecommendationEngineDomainService.ts` | ML recommendation business logic | Part04.5.2 Recommendation Engine (FR-013) | Collaborative filtering algorithms |
| Domain Services | `backend/src/domain/services/MetricCalculationDomainService.ts` | Metric computation business logic | Part04.3.2 Real Time Analytics (FR-008) | Real-time metric calculations |
| Domain Services | `backend/src/domain/services/CohortAnalysisDomainService.ts` | User cohort analysis logic | Part04.3.2 Real Time Analytics (FR-008) | Behavioral segmentation |
| **üìÑ BACKEND APPLICATION** | | | | |
| Use Cases | `backend/src/application/use-cases/analytics/CreateAnalyticsEventUseCase.ts` | Analytics event creation workflow | Part04.3.2 Real Time Analytics (FR-008) | Track user events |
| Use Cases | `backend/src/application/use-cases/analytics/GetDashboardMetricsUseCase.ts` | Dashboard metrics retrieval | Part04.3.2 Real Time Analytics (FR-008) | Real-time dashboard data |
| Use Cases | `backend/src/application/use-cases/analytics/GenerateReportUseCase.ts` | Custom report generation workflow | Part04.5.3 Advanced Reporting (FR-014) | Create custom reports |
| Use Cases | `backend/src/application/use-cases/analytics/CalculateMetricsUseCase.ts` | Real-time metric calculation | Part04.3.2 Real Time Analytics (FR-008) | Live metric updates |
| Use Cases | `backend/src/application/use-cases/experiments/CreateExperimentUseCase.ts` | A/B test experiment creation | Part04.5.1 A/B Testing (FR-012) | Setup A/B tests |
| Use Cases | `backend/src/application/use-cases/experiments/AssignUserToVariantUseCase.ts` | User variant assignment logic | Part04.5.1 A/B Testing (FR-012) | A/B test user allocation |
| Use Cases | `backend/src/application/use-cases/experiments/AnalyzeExperimentResultsUseCase.ts` | Statistical analysis of experiments | Part04.5.1 A/B Testing (FR-012) | A/B test result analysis |
| Use Cases | `backend/src/application/use-cases/experiments/GetExperimentMetricsUseCase.ts` | Experiment performance retrieval | Part04.5.1 A/B Testing (FR-012) | A/B test monitoring |
| Use Cases | `backend/src/application/use-cases/recommendations/GenerateRecommendationsUseCase.ts` | ML recommendation generation | Part04.5.2 Recommendation Engine (FR-013) | Personalized offers |
| Use Cases | `backend/src/application/use-cases/recommendations/TrainModelUseCase.ts` | ML model training workflow | Part04.5.2 Recommendation Engine (FR-013) | Update recommendation models |
| Use Cases | `backend/src/application/use-cases/recommendations/GetUserRecommendationsUseCase.ts` | User-specific recommendations | Part04.5.2 Recommendation Engine (FR-013) | Fetch personalized offers |
| Use Cases | `backend/src/application/use-cases/recommendations/UpdateRecommendationFeedbackUseCase.ts` | Recommendation feedback processing | Part04.5.2 Recommendation Engine (FR-013) | Improve ML accuracy |
| Use Cases | `backend/src/application/use-cases/reporting/ScheduleReportUseCase.ts` | Automated report scheduling | Part04.5.3 Advanced Reporting (FR-014) | Schedule report delivery |
| Use Cases | `backend/src/application/use-cases/reporting/ExportReportUseCase.ts` | Report export functionality | Part04.5.3 Advanced Reporting (FR-014) | Export reports (CSV/PDF) |
| Use Cases | `backend/src/application/use-cases/cohorts/AnalyzeCohortBehaviorUseCase.ts` | Cohort analysis workflow | Part04.3.2 Real Time Analytics (FR-008) | User behavior segmentation |
| Use Cases | `backend/src/application/use-cases/cohorts/CreateCohortUseCase.ts` | Cohort creation workflow | Part04.3.2 Real Time Analytics (FR-008) | Define user segments |
| DTOs | `backend/src/application/dto/AnalyticsDTO.ts` | Analytics data transfer objects | Part08.4.1 Analytics APIs | API contract definitions |
| DTOs | `backend/src/application/dto/ExperimentDTO.ts` | A/B testing DTOs | Part08.4.2 A/B Testing APIs | Experiment API contracts |
| DTOs | `backend/src/application/dto/RecommendationDTO.ts` | Recommendation DTOs | Part08.4.3 Recommendation APIs | ML API contracts |
| DTOs | `backend/src/application/dto/ReportDTO.ts` | Report generation DTOs | Part08.4.4 Custom Reports APIs | Reporting API contracts |
| DTOs | `backend/src/application/dto/DashboardDTO.ts` | Dashboard data DTOs | Part08.4.1 Analytics APIs | Dashboard API contracts |
| DTOs | `backend/src/application/dto/MetricDTO.ts` | Metric calculation DTOs | Part08.4.1 Analytics APIs | Metric API contracts |
| Ports | `backend/src/application/ports/IMLModelService.ts` | Machine learning service interface | Part09.3.1 ML Service Integration | External ML integration |
| Ports | `backend/src/application/ports/IEventStreamService.ts` | Event streaming service interface | Part06.1.2 Event Bus | Real-time event processing |
| Ports | `backend/src/application/ports/IReportGeneratorService.ts` | Report generation service interface | Part04.5.3 Advanced Reporting | External report tools |
| Ports | `backend/src/application/ports/INotificationService.ts` | Notification service interface | Part04.5.3 Advanced Reporting | Report delivery notifications |
| **üèóÔ∏è BACKEND INFRASTRUCTURE** | | | | |
| Repositories | `backend/src/infrastructure/persistence/repositories/AnalyticsEventRepository.ts` | PostgreSQL analytics event repository | Part07.5.1 Analytics_Event Table | Event data persistence |
| Repositories | `backend/src/infrastructure/persistence/repositories/ExperimentRepository.ts` | Experiment data access implementation | Part07.5.2 AB_Test Table | A/B test data persistence |
| Repositories | `backend/src/infrastructure/persistence/repositories/RecommendationRepository.ts` | MongoDB recommendation storage | Part07.5.3 Recommendation Collection | ML data persistence |
| Repositories | `backend/src/infrastructure/persistence/repositories/ReportRepository.ts` | Report metadata storage | Part07.5.4 Report Table | Report configuration storage |
| Repositories | `backend/src/infrastructure/persistence/repositories/DashboardRepository.ts` | Dashboard configuration storage | Part07.5.5 Dashboard Table | Dashboard layout persistence |
| Repositories | `backend/src/infrastructure/persistence/repositories/CohortRepository.ts` | User cohort data access | Part07.5.6 Cohort Table | Cohort analysis storage |
| Models | `backend/src/infrastructure/persistence/models/AnalyticsEventModel.ts` | Prisma analytics event model | Part07.5.1 Analytics_Event Table | Event schema mapping |
| Models | `backend/src/infrastructure/persistence/models/ExperimentModel.ts` | A/B test database model | Part07.5.2 AB_Test Table | Experiment schema mapping |
| Models | `backend/src/infrastructure/persistence/models/RecommendationModel.ts` | MongoDB recommendation model | Part07.5.3 Recommendation Collection | ML schema mapping |
| Models | `backend/src/infrastructure/persistence/models/ReportModel.ts` | Report metadata model | Part07.5.4 Report Table | Report schema |
| Models | `backend/src/infrastructure/persistence/models/DashboardModel.ts` | Dashboard configuration model | Part07.5.5 Dashboard Table | Dashboard schema |
| Models | `backend/src/infrastructure/persistence/models/MetricModel.ts` | Metric calculation model | Part07.5.7 Metric Table | Metric schema mapping |
| Migrations | `backend/src/infrastructure/persistence/migrations/001_create_analytics_events.sql` | Analytics events table creation | Part07.5.1 Analytics_Event Table | Initial event schema |
| Migrations | `backend/src/infrastructure/persistence/migrations/002_create_experiments.sql` | A/B testing tables creation | Part07.5.2 AB_Test Table | Experiment schema setup |
| Migrations | `backend/src/infrastructure/persistence/migrations/003_create_reports.sql` | Report tables creation | Part07.5.4 Report Table | Report metadata schema |
| Migrations | `backend/src/infrastructure/persistence/migrations/004_create_dashboards.sql` | Dashboard tables creation | Part07.5.5 Dashboard Table | Dashboard schema setup |
| Migrations | `backend/src/infrastructure/persistence/migrations/005_create_metrics.sql` | Metric tables creation | Part07.5.7 Metric Table | Metric calculation schema |
| Migrations | `backend/src/infrastructure/persistence/migrations/006_create_cohorts.sql` | Cohort analysis tables | Part07.5.6 Cohort Table | Cohort schema setup |
| External Services | `backend/src/infrastructure/external-services/MLModelAdapter.ts` | Machine learning model adapter | Part09.3.1 ML Service Integration | TensorFlow/PyTorch integration |
| External Services | `backend/src/infrastructure/external-services/EventStreamAdapter.ts` | Event streaming adapter | Part06.1.2 Event Bus | RabbitMQ/Kafka integration |
| External Services | `backend/src/infrastructure/external-services/ReportGeneratorAdapter.ts` | Report generation adapter | Part04.5.3 Advanced Reporting | PDF/CSV generation |
| External Services | `backend/src/infrastructure/external-services/NotificationAdapter.ts` | Notification service adapter | Part04.5.3 Advanced Reporting | Email/SMS notifications |
| External Services | `backend/src/infrastructure/external-services/CacheAdapter.ts` | Redis caching adapter | Part06.3.1 Caching Strategy | High-performance caching |
| Config | `backend/src/infrastructure/config/DatabaseConfig.ts` | Database configuration | Part15.2 Environment Configuration | Multi-DB connection setup |
| Config | `backend/src/infrastructure/config/MLModelConfig.ts` | ML model configuration | Part09.3.1 ML Service Integration | Model parameter settings |
| Config | `backend/src/infrastructure/config/EventStreamConfig.ts` | Event streaming configuration | Part06.1.2 Event Bus | Event processing settings |
| Config | `backend/src/infrastructure/config/CacheConfig.ts` | Redis cache configuration | Part06.3.1 Caching Strategy | Cache optimization settings |
| **üéÆ BACKEND PRESENTATION** | | | | |
| Controllers | `backend/src/presentation/controllers/AnalyticsController.ts` | Analytics REST endpoints | Part08.4.1 Analytics APIs | Real-time analytics endpoints |
| Controllers | `backend/src/presentation/controllers/ExperimentController.ts` | A/B testing REST endpoints | Part08.4.2 A/B Testing APIs | Experiment management endpoints |
| Controllers | `backend/src/presentation/controllers/RecommendationController.ts` | Recommendation REST endpoints | Part08.4.3 Recommendation APIs | ML recommendation endpoints |
| Controllers | `backend/src/presentation/controllers/ReportController.ts` | Report generation REST endpoints | Part08.4.4 Custom Reports APIs | Report management endpoints |
| Controllers | `backend/src/presentation/controllers/DashboardController.ts` | Dashboard REST endpoints | Part08.4.1 Analytics APIs | Dashboard configuration endpoints |
| Controllers | `backend/src/presentation/controllers/CohortController.ts` | Cohort analysis REST endpoints | Part08.4.1 Analytics APIs | Cohort management endpoints |
| Middleware | `backend/src/presentation/middleware/AnalyticsAuthMiddleware.ts` | Analytics-specific authentication | Part05.3 Security Requirements | RBAC for analytics access |
| Middleware | `backend/src/presentation/middleware/RateLimitingMiddleware.ts` | API rate limiting | Part05.1 Performance Requirements | Prevent API abuse |
| Middleware | `backend/src/presentation/middleware/EventTrackingMiddleware.ts` | Automatic event tracking | Part04.3.2 Real Time Analytics | Auto-track API usage |
| Middleware | `backend/src/presentation/middleware/ErrorHandlingMiddleware.ts` | Centralized error handling | Part05.4 Error Handling | Consistent error responses |
| Routes | `backend/src/presentation/routes/AnalyticsRoutes.ts` | Analytics API route definitions | Part08.4.1 Analytics APIs | Route mapping |
| Routes | `backend/src/presentation/routes/ExperimentRoutes.ts` | A/B testing route definitions | Part08.4.2 A/B Testing APIs | Experiment route mapping |
| Routes | `backend/src/presentation/routes/RecommendationRoutes.ts` | Recommendation route definitions | Part08.4.3 Recommendation APIs | ML route mapping |
| Routes | `backend/src/presentation/routes/ReportRoutes.ts` | Report generation route definitions | Part08.4.4 Custom Reports APIs | Report route mapping |
| Routes | `backend/src/presentation/routes/DashboardRoutes.ts` | Dashboard route definitions | Part08.4.1 Analytics APIs | Dashboard route mapping |
| Routes | `backend/src/presentation/routes/CohortRoutes.ts` | Cohort analysis route definitions | Part08.4.1 Analytics APIs | Cohort route mapping |
| Validators | `backend/src/presentation/validators/AnalyticsValidator.ts` | Analytics input validation | Part05.7 Input Validation | Event data validation |
| Validators | `backend/src/presentation/validators/ExperimentValidator.ts` | A/B test input validation | Part05.7 Input Validation | Experiment data validation |
| Validators | `backend/src/presentation/validators/RecommendationValidator.ts` | Recommendation input validation | Part05.7 Input Validation | ML data validation |
| Validators | `backend/src/presentation/validators/ReportValidator.ts` | Report input validation | Part05.7 Input Validation | Report data validation |
| Validators | `backend/src/presentation/validators/MetricValidator.ts` | Metric input validation | Part05.7 Input Validation | Metric data validation |
| **üîß BACKEND SHARED** | | | | |
| Constants | `backend/src/shared/constants/AnalyticsConstants.ts` | Analytics application constants | Part04.3.2 Real Time Analytics | Metric thresholds, limits |
| Constants | `backend/src/shared/constants/ExperimentConstants.ts` | A/B testing constants | Part04.5.1 A/B Testing | Statistical confidence levels |
| Constants | `backend/src/shared/constants/RecommendationConstants.ts` | ML model constants | Part04.5.2 Recommendation Engine | Model parameters, thresholds |
| Constants | `backend/src/shared/constants/ReportConstants.ts` | Report generation constants | Part04.5.3 Advanced Reporting | Export formats, limits |
| Exceptions | `backend/src/shared/exceptions/AnalyticsException.ts` | Analytics-specific exceptions | Part05.4 Error Handling | Custom analytics errors |
| Exceptions | `backend/src/shared/exceptions/ExperimentException.ts` | A/B testing exceptions | Part05.4 Error Handling | Experiment-specific errors |
| Exceptions | `backend/src/shared/exceptions/RecommendationException.ts` | ML model exceptions | Part05.4 Error Handling | ML-specific errors |
| Exceptions | `backend/src/shared/exceptions/ReportException.ts` | Report generation exceptions | Part05.4 Error Handling | Report-specific errors |
| Types | `backend/src/shared/types/AnalyticsTypes.ts` | Analytics TypeScript definitions | Part08.4.1 Analytics APIs | Event type definitions |
| Types | `backend/src/shared/types/ExperimentTypes.ts` | A/B testing type definitions | Part08.4.2 A/B Testing APIs | Experiment type definitions |
| Types | `backend/src/shared/types/RecommendationTypes.ts` | ML model type definitions | Part08.4.3 Recommendation APIs | ML type definitions |
| Types | `backend/src/shared/types/ReportTypes.ts` | Report type definitions | Part08.4.4 Custom Reports APIs | Report type definitions |
| Types | `backend/src/shared/types/MetricTypes.ts` | Metric calculation types | Part08.4.1 Analytics APIs | Metric type definitions |
| Utils | `backend/src/shared/utils/StatisticalUtils.ts` | Statistical calculation utilities | Part04.5.1 A/B Testing | A/B test statistical functions |
| Utils | `backend/src/shared/utils/DateTimeUtils.ts` | Date/time manipulation utilities | Part04.3.2 Real Time Analytics | Time series handling |
| Utils | `backend/src/shared/utils/DataTransformUtils.ts` | Data transformation utilities | Part04.3.2 Real Time Analytics | Metric data processing |
| Utils | `backend/src/shared/utils/ValidationUtils.ts` | Input validation utilities | Part05.7 Input Validation | Shared validation functions |
| Utils | `backend/src/shared/utils/CacheUtils.ts` | Cache management utilities | Part06.3.1 Caching Strategy | Redis cache helpers |
| **üß™ BACKEND TESTING** | | | | |
| Unit Tests | `backend/tests/unit/domain/entities/AnalyticsEvent.test.ts` | Analytics event entity tests | Part12.1 Unit Testing | Domain logic testing |
| Unit Tests | `backend/tests/unit/domain/entities/Experiment.test.ts` | Experiment entity tests | Part12.1 Unit Testing | A/B test logic testing |
| Unit Tests | `backend/tests/unit/domain/entities/Recommendation.test.ts` | Recommendation entity tests | Part12.1 Unit Testing | ML logic testing |
| Unit Tests | `backend/tests/unit/domain/services/StatisticalAnalysisService.test.ts` | Statistical service tests | Part12.1 Unit Testing | Statistical calculation testing |
| Unit Tests | `backend/tests/unit/domain/services/RecommendationEngineService.test.ts` | ML service tests | Part12.1 Unit Testing | ML algorithm testing |
| Unit Tests | `backend/tests/unit/application/use-cases/CreateExperiment.test.ts` | Create experiment use case tests | Part12.1 Unit Testing | A/B test workflow testing |
| Unit Tests | `backend/tests/unit/application/use-cases/GenerateRecommendations.test.ts` | Generate recommendations tests | Part12.1 Unit Testing | ML workflow testing |
| Unit Tests | `backend/tests/unit/application/use-cases/CalculateMetrics.test.ts` | Calculate metrics tests | Part12.1 Unit Testing | Metric calculation testing |
| Integration Tests | `backend/tests/integration/repositories/AnalyticsEventRepository.test.ts` | Analytics repository tests | Part12.2 Integration Testing | Database integration testing |
| Integration Tests | `backend/tests/integration/repositories/ExperimentRepository.test.ts` | Experiment repository tests | Part12.2 Integration Testing | A/B test data testing |
| Integration Tests | `backend/tests/integration/repositories/RecommendationRepository.test.ts` | Recommendation repository tests | Part12.2 Integration Testing | ML data testing |
| Integration Tests | `backend/tests/integration/external-services/MLModelAdapter.test.ts` | ML adapter tests | Part12.2 Integration Testing | External ML service testing |
| Integration Tests | `backend/tests/integration/external-services/EventStreamAdapter.test.ts` | Event stream tests | Part12.2 Integration Testing | Event bus testing |
| Integration Tests | `backend/tests/integration/external-services/ReportGeneratorAdapter.test.ts` | Report generator tests | Part12.2 Integration Testing | Report service testing |
| E2E Tests | `backend/tests/e2e/analytics/dashboard-metrics.test.ts` | Dashboard metrics E2E tests | Part12.3 E2E Testing | Complete analytics flow |
| E2E Tests | `backend/tests/e2e/experiments/ab-test-flow.test.ts` | A/B testing E2E tests | Part12.3 E2E Testing | Complete A/B test flow |
| E2E Tests | `backend/tests/e2e/recommendations/recommendation-flow.test.ts` | Recommendation E2E tests | Part12.3 E2E Testing | Complete ML flow |
| E2E Tests | `backend/tests/e2e/reports/report-generation.test.ts` | Report generation E2E tests | Part12.3 E2E Testing | Complete reporting flow |
| **üìÅ PROJECT CONFIGURATION** | | | | |
| Package Config | `backend/package.json` | Node.js dependencies v√† scripts | EMSA-v1.0 Package Standards | NestJS, Prisma, Redis dependencies |
| TypeScript Config | `backend/tsconfig.json` | TypeScript compilation settings | EMSA-v1.0 TypeScript Config | Strict type checking |
| Testing Config | `backend/jest.config.js` | Jest testing configuration | EMSA-v1.0 Testing Standards | Unit, integration, E2E setup |
| Linting Config | `backend/eslint.config.js` | ESLint code quality rules | EMSA-v1.0 ESLint Config | Code quality enforcement |
| Database Config | `backend/prisma/schema.prisma` | Database schema definition | Part07.5 Analytics Database Design | Multi-database schema |
| Docker Config | `backend/Dockerfile` | Container configuration | EMSA-v1.0 Docker Standards | Production-ready container |
| Environment | `backend/.env.example` | Environment variables template | Part15.2 Environment Configuration | Configuration management |
| Documentation | `backend/README.md` | Project documentation | EMSA-v1.0 Documentation Standards | Setup v√† usage guide |

---

## üèóÔ∏è **EMSA-v1.0 FOLDER STRUCTURE**

```
analytics-intelligence-service/
‚îî‚îÄ‚îÄ backend/
    ‚îú‚îÄ‚îÄ src/
    ‚îÇ   ‚îú‚îÄ‚îÄ domain/                           # Domain Layer (Pure Business Logic)
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ entities/                     # Business Entities with Rules
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AnalyticsEvent.ts         # Core event tracking entity
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Experiment.ts             # A/B testing experiment entity
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ExperimentVariant.ts      # Experiment variant entity
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Recommendation.ts         # ML recommendation entity
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Report.ts                 # Custom report entity
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Dashboard.ts              # Analytics dashboard entity
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Metric.ts                 # Performance metric entity
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Cohort.ts                 # User cohort entity
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ value-objects/                # Immutable Value Objects
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MetricValue.ts            # Standardized metric values
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TimeRange.ts              # Time period handling
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ConfidenceLevel.ts        # Statistical confidence levels
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ RecommendationScore.ts    # ML recommendation scores
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ repositories/                 # Repository Interfaces (Ports)
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ IAnalyticsEventRepository.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ IExperimentRepository.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ IRecommendationRepository.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ IReportRepository.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ IDashboardRepository.ts
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ services/                     # Domain Services (Complex Logic)
    ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ StatisticalAnalysisDomainService.ts
    ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ RecommendationEngineDomainService.ts
    ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ MetricCalculationDomainService.ts
    ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ CohortAnalysisDomainService.ts
    ‚îÇ   ‚îú‚îÄ‚îÄ application/                      # Application Layer (Orchestration)
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ use-cases/                    # Use Cases (Application Workflows)
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ analytics/                # Real-time analytics workflows
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CreateAnalyticsEventUseCase.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GetDashboardMetricsUseCase.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GenerateReportUseCase.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CalculateMetricsUseCase.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ experiments/              # A/B testing workflows
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CreateExperimentUseCase.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AssignUserToVariantUseCase.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AnalyzeExperimentResultsUseCase.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ GetExperimentMetricsUseCase.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ recommendations/          # ML recommendation workflows
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GenerateRecommendationsUseCase.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TrainModelUseCase.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GetUserRecommendationsUseCase.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ UpdateRecommendationFeedbackUseCase.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ reporting/                # Advanced reporting workflows
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ScheduleReportUseCase.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ExportReportUseCase.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ cohorts/                  # Cohort analysis workflows
    ‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ AnalyzeCohortBehaviorUseCase.ts
    ‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ CreateCohortUseCase.ts
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dto/                          # Data Transfer Objects
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AnalyticsDTO.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ExperimentDTO.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RecommendationDTO.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ReportDTO.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DashboardDTO.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ MetricDTO.ts
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ports/                        # External Service Interfaces
    ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ IMLModelService.ts
    ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ IEventStreamService.ts
    ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ IReportGeneratorService.ts
    ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ INotificationService.ts
    ‚îÇ   ‚îú‚îÄ‚îÄ infrastructure/                   # Infrastructure Layer (External Concerns)
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ persistence/                  # Database Implementation
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ repositories/             # Repository Implementations
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AnalyticsEventRepository.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ExperimentRepository.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RecommendationRepository.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ReportRepository.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DashboardRepository.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CohortRepository.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models/                   # ORM Models (Prisma)
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AnalyticsEventModel.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ExperimentModel.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RecommendationModel.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ReportModel.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DashboardModel.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ MetricModel.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ migrations/               # Database Migrations
    ‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ 001_create_analytics_events.sql
    ‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ 002_create_experiments.sql
    ‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ 003_create_reports.sql
    ‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ 004_create_dashboards.sql
    ‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ 005_create_metrics.sql
    ‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ 006_create_cohorts.sql
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ external-services/            # Third-party Service Adapters
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MLModelAdapter.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ EventStreamAdapter.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ReportGeneratorAdapter.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ NotificationAdapter.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CacheAdapter.ts
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config/                       # Configuration Management
    ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ DatabaseConfig.ts
    ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ MLModelConfig.ts
    ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ EventStreamConfig.ts
    ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ CacheConfig.ts
    ‚îÇ   ‚îú‚îÄ‚îÄ presentation/                     # Presentation Layer (API Interface)
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ controllers/                  # REST Controllers
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AnalyticsController.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ExperimentController.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RecommendationController.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ReportController.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DashboardController.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CohortController.ts
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ middleware/                   # NestJS Middleware
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AnalyticsAuthMiddleware.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RateLimitingMiddleware.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ EventTrackingMiddleware.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ErrorHandlingMiddleware.ts
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes/                       # Route Definitions
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AnalyticsRoutes.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ExperimentRoutes.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RecommendationRoutes.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ReportRoutes.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DashboardRoutes.ts
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CohortRoutes.ts
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validators/                   # Input Validation
    ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ AnalyticsValidator.ts
    ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ ExperimentValidator.ts
    ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ RecommendationValidator.ts
    ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ ReportValidator.ts
    ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ MetricValidator.ts
    ‚îÇ   ‚îî‚îÄ‚îÄ shared/                           # Shared Utilities
    ‚îÇ       ‚îú‚îÄ‚îÄ constants/                    # Application Constants
    ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ AnalyticsConstants.ts
    ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ ExperimentConstants.ts
    ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ RecommendationConstants.ts
    ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ ReportConstants.ts
    ‚îÇ       ‚îú‚îÄ‚îÄ exceptions/                   # Custom Exceptions
    ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ AnalyticsException.ts
    ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ ExperimentException.ts
    ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ RecommendationException.ts
    ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ ReportException.ts
    ‚îÇ       ‚îú‚îÄ‚îÄ types/                        # TypeScript Type Definitions
    ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ AnalyticsTypes.ts
    ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ ExperimentTypes.ts
    ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ RecommendationTypes.ts
    ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ ReportTypes.ts
    ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ MetricTypes.ts
    ‚îÇ       ‚îî‚îÄ‚îÄ utils/                        # Utility Functions
    ‚îÇ           ‚îú‚îÄ‚îÄ StatisticalUtils.ts
    ‚îÇ           ‚îú‚îÄ‚îÄ DateTimeUtils.ts
    ‚îÇ           ‚îú‚îÄ‚îÄ DataTransformUtils.ts
    ‚îÇ           ‚îú‚îÄ‚îÄ ValidationUtils.ts
    ‚îÇ           ‚îî‚îÄ‚îÄ CacheUtils.ts
    ‚îú‚îÄ‚îÄ tests/                                # Testing Structure
    ‚îÇ   ‚îú‚îÄ‚îÄ unit/                             # Unit Tests (Domain/Application)
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ domain/
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ entities/
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ services/
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ application/
    ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ use-cases/
    ‚îÇ   ‚îú‚îÄ‚îÄ integration/                      # Integration Tests (Infrastructure)
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ repositories/
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ external-services/
    ‚îÇ   ‚îî‚îÄ‚îÄ e2e/                              # End-to-End Tests
    ‚îÇ       ‚îú‚îÄ‚îÄ analytics/
    ‚îÇ       ‚îú‚îÄ‚îÄ experiments/
    ‚îÇ       ‚îú‚îÄ‚îÄ recommendations/
    ‚îÇ       ‚îî‚îÄ‚îÄ reports/
    ‚îú‚îÄ‚îÄ package.json                          # Dependencies + Scripts
    ‚îú‚îÄ‚îÄ tsconfig.json                         # TypeScript Configuration
    ‚îú‚îÄ‚îÄ jest.config.js                        # Testing Configuration
    ‚îú‚îÄ‚îÄ eslint.config.js                      # Code Quality Rules
    ‚îú‚îÄ‚îÄ prisma/schema.prisma                  # Database Schema
    ‚îú‚îÄ‚îÄ Dockerfile                            # Container Configuration
    ‚îú‚îÄ‚îÄ .env.example                          # Environment Variables Template
    ‚îî‚îÄ‚îÄ README.md                             # Project Documentation
```

---

## üöÄ **IMPLEMENTATION CHECKLIST**

### **Phase 1: Core Analytics Infrastructure (Week 1-2)**
- [ ] **Setup project structure** theo EMSA-v1.0 standards
- [ ] **Configure NestJS** v·ªõi TypeScript, Prisma, Redis
- [ ] **Implement Analytics Event entity** v·ªõi business validation
- [ ] **Create analytics event repository** v·ªõi PostgreSQL integration
- [ ] **Setup event tracking middleware** cho automatic event capture
- [ ] **Implement real-time metric calculation** service
- [ ] **Create basic analytics dashboard** endpoints
- [ ] **Setup Redis caching** cho high-performance metrics

### **Phase 2: A/B Testing Framework (Week 3-4)**
- [ ] **Implement Experiment entity** v·ªõi statistical validation
- [ ] **Create experiment repository** v·ªõi variant management
- [ ] **Implement statistical analysis** domain service (>95% confidence)
- [ ] **Create user assignment algorithm** cho A/B testing
- [ ] **Setup experiment results** calculation workflow
- [ ] **Implement A/B testing APIs** cho experiment management
- [ ] **Create experiment monitoring** dashboard
- [ ] **Setup automated result** analysis reporting

### **Phase 3: ML Recommendation Engine (Week 5-6)**
- [ ] **Implement Recommendation entity** v·ªõi ML model integration
- [ ] **Create recommendation repository** v·ªõi MongoDB
- [ ] **Setup ML model adapter** cho external ML services
- [ ] **Implement collaborative filtering** algorithms
- [ ] **Create recommendation generation** workflow
- [ ] **Setup model training** pipeline
- [ ] **Implement recommendation APIs** cho offer generation
- [ ] **Create recommendation feedback** loop

### **Phase 4: Advanced Reporting (Week 7-8)**
- [ ] **Implement Report entity** v·ªõi custom query building
- [ ] **Create report repository** v·ªõi template management
- [ ] **Setup report generation** service v·ªõi PDF/CSV export
- [ ] **Implement scheduled reporting** workflow
- [ ] **Create custom report builder** API
- [ ] **Setup report delivery** via email/notifications
- [ ] **Implement report caching** cho performance
- [ ] **Create report analytics** v√† usage tracking

### **Phase 5: Cohort Analysis & Advanced Features (Week 9-10)**
- [ ] **Implement Cohort entity** v·ªõi behavioral segmentation
- [ ] **Create cohort analysis** algorithms
- [ ] **Setup cohort tracking** workflow
- [ ] **Implement cohort APIs** cho segment management
- [ ] **Create advanced dashboard** features
- [ ] **Setup real-time alerting** system
- [ ] **Implement data export** functionality
- [ ] **Create analytics API** rate limiting

### **Phase 6: Testing & Optimization (Week 11-12)**
- [ ] **Write comprehensive unit tests** cho domain logic
- [ ] **Create integration tests** cho database operations
- [ ] **Implement E2E tests** cho complete workflows
- [ ] **Setup performance testing** cho high-load scenarios
- [ ] **Optimize database queries** v·ªõi indexing strategies
- [ ] **Implement API documentation** v·ªõi OpenAPI 3.0
- [ ] **Setup monitoring** v√† logging infrastructure
- [ ] **Create deployment** scripts v√† CI/CD pipeline

---

## üéØ **CORE FEATURES IMPLEMENTATION**

### **FR-008: Real Time Analytics**
- **Event Tracking**: Automatic capture of user interactions v·ªõi campaign
- **Real-time Dashboards**: Live metrics v·ªÅ clicks, scans, conversions
- **Performance Metrics**: Campaign ROI, engagement rates, funnel analysis
- **Data Export**: CSV/JSON export cho external analysis
- **GDPR Compliance**: Data anonymization v√† user consent management

### **FR-012: A/B Testing**
- **Experiment Management**: Create, manage, analyze A/B tests
- **Statistical Analysis**: >95% confidence level calculations
- **User Assignment**: Intelligent variant allocation algorithms
- **Result Monitoring**: Real-time experiment performance tracking
- **Automated Analysis**: Statistical significance detection

### **FR-013: Recommendation Engine**
- **ML Model Integration**: TensorFlow/PyTorch model support
- **Collaborative Filtering**: User-based v√† item-based recommendations
- **Real-time Generation**: <3s recommendation response time
- **Feedback Loop**: Continuous model improvement
- **Personalization**: User-specific offer recommendations

### **FR-014: Advanced Reporting**
- **Custom Reports**: Drag-and-drop report builder
- **Scheduled Delivery**: Automated report generation v√† distribution
- **Multiple Formats**: PDF, CSV, JSON export options
- **Template Management**: Reusable report templates
- **Audit Logging**: Complete report access tracking

---

## üîó **INTEGRATION POINTS**

### **Event Bus Integration**
```typescript
// Event Stream Adapter
@Injectable()
export class EventStreamAdapter implements IEventStreamService {
  async publishAnalyticsEvent(event: AnalyticsEvent): Promise<void> {
    // RabbitMQ/Kafka integration
  }
}
```

### **ML Model Integration**
```typescript
// ML Model Adapter
@Injectable()
export class MLModelAdapter implements IMLModelService {
  async generateRecommendations(userId: string): Promise<Recommendation[]> {
    // TensorFlow/PyTorch integration
  }
}
```

### **Cache Integration**
```typescript
// Redis Cache Adapter
@Injectable()
export class CacheAdapter {
  async cacheMetrics(key: string, data: any, ttl: number): Promise<void> {
    // Redis caching implementation
  }
}
```

---

## üìä **DATABASE DESIGN**

### **PostgreSQL Tables**
- **analytics_events**: Event tracking v·ªõi JSON metadata
- **experiments**: A/B test configurations
- **experiment_variants**: Variant definitions
- **experiment_assignments**: User-variant mappings
- **reports**: Report metadata v√† configurations
- **dashboards**: Dashboard layout configurations
- **metrics**: Calculated metric values
- **cohorts**: User segmentation data

### **MongoDB Collections**
- **recommendations**: ML-generated recommendations
- **model_data**: ML model training data
- **user_profiles**: Enhanced user behavior profiles

### **Redis Cache**
- **real_time_metrics**: Live dashboard data
- **experiment_assignments**: Fast variant lookups
- **recommendation_cache**: Cached ML predictions

---

## üîí **SECURITY & COMPLIANCE**

### **RBAC Integration**
- **Brand Admin**: Full analytics access, experiment management
- **Brand Staff**: Read-only analytics, limited reporting
- **Platform Admin**: System-wide analytics, all experiments

### **Data Privacy**
- **GDPR Compliance**: Data anonymization, right to deletion
- **Audit Logging**: Complete access tracking
- **Data Encryption**: AES-256 cho sensitive analytics data

### **Rate Limiting**
- **API Protection**: Prevent abuse of analytics endpoints
- **Resource Management**: Fair usage across tenants
- **Performance Optimization**: Maintain sub-200ms response times

---

## üöÄ **DEPLOYMENT & SCALING**

### **Kubernetes Configuration**
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: analytics-intelligence-service
spec:
  replicas: 3
  selector:
    matchLabels:
      app: analytics-intelligence
  template:
    spec:
      containers:
      - name: analytics-service
        image: analytics-intelligence:latest
        ports:
        - containerPort: 3000
        env:
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              name: db-credentials
              key: url
```

### **Horizontal Scaling**
- **Auto-scaling**: Based on CPU v√† memory utilization
- **Load Balancing**: Distribute traffic across instances
- **Database Sharding**: Scale analytics data across multiple DBs

### **Monitoring & Observability**
- **Prometheus**: Metrics collection
- **Grafana**: Dashboard visualization
- **ELK Stack**: Logging v√† search
- **Jaeger**: Distributed tracing

---

**üéØ Sub-Project 4 Implementation Ready! Analytics & Intelligence service s·∫µn s√†ng cho enterprise-scale deployment v·ªõi complete feature coverage t·ª´ SRS-Grok-V2! üöÄ**
